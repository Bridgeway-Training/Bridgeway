<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>BridgeWay Online English Academy</title>
  <meta name="description" content="BridgeWay helps you master English fast with adaptive classes, certified teachers, and measurable progress." />
  <meta name="theme-color" content="#0A0F4C" />
  <meta property="og:title" content="BridgeWay Online English Academy" />
  <meta property="og:description" content="Book your free English class and take the 5-minute BridgeWay level test." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://bridgeway.example" />
  <meta property="og:image" content="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='630'%3E%3Crect fill='%230A0F4C' width='1200' height='630'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Inter' font-size='64' fill='%23ffffff'%3EBridgeWay%3C/text%3E%3C/svg%3E" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="BridgeWay Online English Academy" />
  <meta name="twitter:description" content="Adaptive English programs, free class, level test, and corporate plans." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script>
    window.tailwind_config = {
      theme: {
        extend: {
          colors: {
            'bw-bridge': '#0A0F4C',
            'bw-way': '#4967E4'
          }
        }
      }
    };
  </script>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio"></script>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
    .gradient-hero { background-image: linear-gradient(135deg, #0A0F4C, #1d2a8a, #4967E4); }
    .gradient-cta { background-image: linear-gradient(135deg, #4967E4, #5e7fff); }
    .gradient-section { background-image: linear-gradient(135deg, rgba(10,15,76,.05), rgba(73,103,228,.05)); }
    .focus-ring { outline: 2px solid transparent; outline-offset: 2px; }
    .focus-ring:focus-visible { outline-color: #4967E4; }
    [data-reduced-motion="true"] * { transition-duration: .01ms !important; animation-duration: .01ms !important; }
  </style>
  <link rel="manifest" id="manifest-link" />
  <script type="application/ld+json" id="ld-organization"></script>
  <script type="application/ld+json" id="ld-breadcrumbs"></script>
  <script type="application/ld+json" id="ld-faq"></script>
</head>
<body class="bg-white text-slate-900 transition-colors duration-300 ease-out dark:bg-slate-950 dark:text-slate-100">
  <div class="sr-only" id="skip"><a href="#home" class="focus-ring">Skip to content</a></div>
  <div id="sticky-offer" class="hidden fixed inset-x-0 top-0 z-40 bg-gradient-to-r from-bw-way via-indigo-500 to-bw-bridge py-2 px-4 text-sm text-white shadow-lg md:flex md:items-center md:justify-between">
    <p class="font-medium" data-i18n="sticky.offer">Free placement test today. Secure your spot in 2 minutes.</p>
    <button data-testid="offer-cta" class="gradient-cta rounded-full px-4 py-2 text-sm font-semibold shadow focus-ring" data-action="open-free-class">
      <span data-i18n="ctas.book">Book your free class</span>
    </button>
  </div>
  <header id="main-header" class="fixed top-0 inset-x-0 z-50 bg-white/90 dark:bg-slate-950/90 backdrop-blur shadow transition-all duration-300">
    <div class="mx-auto flex max-w-7xl items-center justify-between px-4 py-4 lg:py-5">
      <a href="#home" class="flex items-center gap-2 focus-ring" data-testid="logo"><span class="text-2xl font-bold"><span class="text-bw-bridge">Bridge</span><span class="text-bw-way">Way</span></span></a>
      <nav aria-label="Main" class="hidden items-center gap-8 text-sm font-medium lg:flex">
        <a href="#home" class="hover:text-bw-way focus-ring" data-i18n="menu.home">Home</a>
        <a href="#programs" class="hover:text-bw-way focus-ring" data-i18n="menu.programs">Programs</a>
        <a href="#methodology" class="hover:text-bw-way focus-ring" data-i18n="menu.methodology">Methodology</a>
        <a href="#teachers" class="hover:text-bw-way focus-ring" data-i18n="menu.teachers">Teachers</a>
        <a href="#pricing" class="hover:text-bw-way focus-ring" data-i18n="menu.pricing">Pricing</a>
        <a href="#resources" class="hover:text-bw-way focus-ring" data-i18n="menu.resources">Resources</a>
        <a href="#test" class="hover:text-bw-way focus-ring" data-i18n="menu.test">Level Test</a>
      </nav>
      <div class="flex items-center gap-3">
        <div class="hidden items-center gap-4 text-xs text-bw-way lg:flex">
          <a href="https://wa.me/447441432198" target="_blank" rel="noopener" class="flex items-center gap-1 focus-ring" data-testid="header-whatsapp" aria-label="WhatsApp">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12.04 2c-5.52 0-10 4.43-10 9.9 0 1.74.47 3.43 1.38 4.93L2 22l5.3-1.37a10.09 10.09 0 0 0 4.74 1.2h.01c5.53 0 10-4.44 10-9.9 0-5.47-4.47-9.9-10-9.9Zm5.91 14.09c-.25.7-1.24 1.29-1.72 1.33-.47.04-1.02.06-1.65-.1-.38-.1-.87-.28-1.5-.55-2.63-1.14-4.35-3.8-4.48-3.98-.13-.19-1.07-1.43-1.07-2.73 0-1.3.68-1.93.92-2.19.25-.26.55-.33.73-.33.19 0 .36.01.51.01.16 0 .39-.08.61.47.23.55.78 1.93.85 2.07.07.15.11.32.02.51-.09.19-.14.31-.27.47-.14.16-.29.36-.41.48-.14.14-.28.29-.12.57.16.26.71 1.16 1.52 1.88 1.05.94 1.94 1.23 2.23 1.37.29.14.46.12.63-.07.18-.2.73-.85.92-1.14.19-.29.4-.24.68-.14.29.11 1.83.87 2.14 1.02.31.15.52.24.6.37.08.12.08.71-.17 1.41Z"/></svg>
            <span>+44 7441 432198</span>
          </a>
          <a href="tel:+447441432198" class="flex items-center gap-1 focus-ring" data-testid="header-call" aria-label="Call">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.15 6.59 6.59l2.2-2.2a1 1 0 0 1 1.01-.24c1.12.37 2.33.57 3.58.57a1 1 0 0 1 1 1v3.5a1 1 0 0 1-1 1C11.3 21 3 12.7 3 2.5a1 1 0 0 1 1-1H7.5a1 1 0 0 1 1 1c0 1.25.2 2.46.57 3.58a1 1 0 0 1-.25 1.01l-2.2 2.2Z"/></svg>
            <span>+44 7441 432198</span>
          </a>
        </div>
        <button id="theme-toggle" class="focus-ring rounded-full border border-slate-200 p-2 text-slate-600 transition hover:border-bw-way hover:text-bw-way dark:border-slate-700 dark:text-slate-300" aria-label="Toggle theme" data-testid="theme-toggle">
          <svg id="theme-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12Zm0-16a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1Zm0 16a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0v-2a1 1 0 0 1 1-1ZM4 11a1 1 0 0 1 1 1 7 7 0 0 0 7 7 1 1 0 1 1 0 2 9 9 0 0 1-9-9 1 1 0 0 1 1-1Zm16 0a1 1 0 0 1 1 1 9 9 0 0 1-9 9 1 1 0 1 1 0-2 7 7 0 0 0 7-7 1 1 0 0 1 1-1Z"/></svg>
        </button>
        <label class="relative">
          <span class="sr-only">Language</span>
          <select id="language-switcher" class="focus-ring rounded-full border border-slate-200 bg-white px-3 py-1 text-sm dark:border-slate-700 dark:bg-slate-900" data-testid="language-switcher" aria-label="Language">
            <option value="en">EN</option>
            <option value="ru">RU</option>
            <option value="ro">RO</option>
          </select>
        </label>
        <button class="gradient-cta hidden rounded-full px-4 py-2 text-sm font-semibold text-white shadow focus-ring md:inline-flex" data-action="open-free-class" data-testid="header-free-class"><span data-i18n="ctas.book">Book your free class</span></button>
        <button id="mobile-menu" class="lg:hidden focus-ring rounded-full border border-slate-200 p-2 text-slate-600 dark:border-slate-700 dark:text-slate-200" aria-expanded="false" aria-controls="mobile-nav">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16"/></svg>
          <span class="sr-only">Menu</span>
        </button>
      </div>
    </div>
    <div id="mobile-nav" class="hidden border-t border-slate-200 bg-white px-4 py-4 dark:border-slate-800 dark:bg-slate-950 lg:hidden" role="dialog" aria-label="Mobile menu">
      <nav class="flex flex-col gap-3 text-sm font-medium">
        <a href="#home" class="hover:text-bw-way focus-ring" data-i18n="menu.home">Home</a>
        <a href="#programs" class="hover:text-bw-way focus-ring" data-i18n="menu.programs">Programs</a>
        <a href="#methodology" class="hover:text-bw-way focus-ring" data-i18n="menu.methodology">Methodology</a>
        <a href="#teachers" class="hover:text-bw-way focus-ring" data-i18n="menu.teachers">Teachers</a>
        <a href="#pricing" class="hover:text-bw-way focus-ring" data-i18n="menu.pricing">Pricing</a>
        <a href="#resources" class="hover:text-bw-way focus-ring" data-i18n="menu.resources">Resources</a>
        <a href="#test" class="hover:text-bw-way focus-ring" data-i18n="menu.test">Level Test</a>
        <button class="gradient-cta rounded-full px-4 py-2 text-sm font-semibold text-white shadow focus-ring" data-action="open-free-class" data-testid="mobile-free-class"><span data-i18n="ctas.book">Book your free class</span></button>
      </nav>
    </div>
  </header>
  <main class="pt-24">
    <section id="home" class="relative overflow-hidden">
      <div class="gradient-hero relative isolate px-4 py-24 text-white">
        <div class="mx-auto flex max-w-6xl flex-col gap-10 lg:flex-row lg:items-center">
          <div class="max-w-2xl space-y-6">
            <div class="inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-1 text-xs font-medium uppercase tracking-wide backdrop-blur">
              <span data-i18n="hero.badge">Decide in 5 seconds</span>
              <span class="h-1 w-1 rounded-full bg-white"></span>
              <span id="hero-variant-label">Variant A</span>
            </div>
            <h1 class="text-4xl font-bold leading-tight sm:text-5xl" data-i18n="hero.title">BridgeWay English Academy. Decide in 5 seconds.</h1>
            <p class="max-w-xl text-lg text-white/90" data-i18n="hero.subtitle">Adaptive English programs that connect you to opportunities worldwide. Try a free live class and know your level instantly.</p>
            <div class="flex flex-wrap gap-3" id="hero-ctas">
              <button data-testid="hero-free-class" data-action="open-free-class" class="focus-ring gradient-cta inline-flex items-center justify-center rounded-full px-6 py-3 text-base font-semibold text-white shadow-lg transition hover:-translate-y-0.5 hover:shadow-xl">
                <span data-i18n="ctas.book">Book your free class</span>
              </button>
              <button data-testid="hero-secondary" data-action="open-test" class="focus-ring inline-flex items-center justify-center rounded-full border border-white/60 px-6 py-3 text-base font-semibold text-white/90 transition hover:border-white hover:text-white">
                <span data-i18n="ctas.test">Take the level test</span>
              </button>
            </div>
            <div class="flex flex-wrap items-center gap-6 text-sm text-white/80">
              <div class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10.01 10.01 0 0 0 12 2Zm-.25 5.01a1 1 0 0 1 1 1v3.3l2.27 1.52a1 1 0 0 1-1.14 1.64l-2.85-1.9a1 1 0 0 1-.44-.83V8a1 1 0 0 1 1-1Z"/></svg>
                <span data-i18n="hero.metric1">92% move up one level in 12 weeks*</span>
              </div>
              <div class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 3a9 9 0 1 0 9 9 9 9 0 0 0-9-9Zm0 16a1 1 0 1 1 1-1 1 1 0 0 1-1 1Zm1-4h-2V7h2Z"/></svg>
                <span data-i18n="hero.metric2">Average feedback score 4.9/5</span>
              </div>
            </div>
          </div>
          <div class="relative flex-1">
            <div class="rounded-3xl bg-white/10 p-6 shadow-xl backdrop-blur">
              <div class="grid gap-6" aria-live="polite">
                <div class="rounded-2xl bg-white/90 p-4 text-slate-800 shadow-lg dark:bg-slate-900 dark:text-white">
                  <h3 class="text-lg font-semibold" data-i18n="hero.snapshotTitle">Your BridgeWay snapshot</h3>
                  <dl class="mt-3 grid grid-cols-2 gap-3 text-sm">
                    <div><dt class="font-medium" data-i18n="hero.snapshotLevel">Level today</dt><dd id="snapshot-level">B1</dd></div>
                    <div><dt class="font-medium" data-i18n="hero.snapshotGoal">Goal</dt><dd id="snapshot-goal">Career boost</dd></div>
                    <div><dt class="font-medium" data-i18n="hero.snapshotTime">Time to result</dt><dd id="snapshot-time">12 weeks</dd></div>
                    <div><dt class="font-medium" data-i18n="hero.snapshotAction">Next step</dt><dd data-i18n="hero.snapshotActionValue">Book your free class</dd></div>
                  </dl>
                </div>
                <div class="rounded-2xl bg-white/90 p-4 shadow-lg dark:bg-slate-900">
                  <h3 class="text-lg font-semibold" data-i18n="hero.timerTitle">Live availability</h3>
                  <p class="text-sm text-slate-600 dark:text-slate-300" data-i18n="hero.timerSubtitle">Next coach opens a slot in:</p>
                  <div class="mt-3 text-3xl font-bold text-bw-way" id="slot-timer" aria-live="polite">00:09:12</div>
                  <button class="mt-4 inline-flex items-center gap-2 text-sm font-semibold text-bw-way underline focus-ring" data-action="open-free-class" data-testid="hero-slot-button">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M5 4h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-5a1 1 0 0 1 0-2h4V6H6v4a1 1 0 0 1-2 0V5a1 1 0 0 1 1-1Zm7 6a1 1 0 0 1 1 1v3h3a1 1 0 0 1 0 2h-3v3a1 1 0 0 1-2 0v-3H8a1 1 0 0 1 0-2h3v-3a1 1 0 0 1 1-1Z"/></svg>
                    <span data-i18n="hero.slotCta">Reserve now</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <button id="scroll-down" class="absolute bottom-4 left-1/2 -translate-x-1/2 animate-bounce rounded-full border border-white/40 p-2 text-white/80 transition hover:border-white focus-ring" aria-label="Scroll to programs">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 9 6 6 6-6"/></svg>
        </button>
        <div class="absolute inset-0 -z-10" id="hero-parallax" aria-hidden="true"></div>
      </div>
      <p class="px-4 py-3 text-center text-xs text-slate-500" data-i18n="hero.footnote">*Based on BridgeWay student progress review 2023.</p>
    </section>

    <nav aria-label="Breadcrumb" class="mx-auto mt-8 max-w-6xl px-4">
      <ol class="flex items-center gap-2 text-sm text-slate-500">
        <li><a href="#home" class="hover:text-bw-way focus-ring" data-i18n="breadcrumb.home">Home</a></li>
        <li aria-hidden="true">/</li>
        <li><a href="#programs" class="hover:text-bw-way focus-ring" data-i18n="breadcrumb.programs">Programs</a></li>
        <li aria-hidden="true">/</li>
        <li class="text-slate-700 dark:text-slate-200" data-i18n="breadcrumb.current">Overview</li>
      </ol>
    </nav>
    <section id="programs" class="mx-auto mt-12 max-w-6xl px-4 py-16">
      <div class="flex flex-col gap-8 lg:flex-row lg:items-start">
        <div class="flex-1 space-y-6">
          <h2 class="text-3xl font-bold" data-i18n="programs.title">Programs designed for the way you work and live</h2>
          <p class="text-lg text-slate-600 dark:text-slate-300" data-i18n="programs.subtitle">Choose from flexible pathways for professionals, students, and teams. Every option includes live coaching, progress analytics, and real business scenarios.</p>
          <div class="grid gap-6 sm:grid-cols-2">
            <article class="rounded-3xl border border-transparent bg-gradient-to-br from-white via-white to-slate-100 p-6 shadow-lg transition duration-200 hover:-translate-y-1 hover:border-bw-way hover:shadow-xl dark:from-slate-900 dark:via-slate-900 dark:to-slate-950" data-program="essential">
              <h3 class="text-xl font-semibold">Essential</h3>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300" data-i18n="programs.essential">Fast-track core skills with weekly live feedback and AI-powered practice.</p>
              <ul class="mt-4 space-y-2 text-sm">
                <li>• 2 live sessions/week</li>
                <li>• Personalized homework</li>
                <li>• Progress dashboard</li>
              </ul>
              <button class="mt-6 w-full rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way transition hover:bg-bw-way hover:text-white focus-ring" data-action="view-program" data-testid="program-essential">View program</button>
            </article>
            <article class="rounded-3xl border border-transparent bg-gradient-to-br from-white via-white to-slate-100 p-6 shadow-lg transition duration-200 hover:-translate-y-1 hover:border-bw-way hover:shadow-xl dark:from-slate-900 dark:via-slate-900 dark:to-slate-950" data-program="pro">
              <h3 class="text-xl font-semibold">Pro</h3>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300" data-i18n="programs.pro">Advanced communication for meetings, negotiations, and leadership.</p>
              <ul class="mt-4 space-y-2 text-sm">
                <li>• 3 live sessions/week</li>
                <li>• Business simulations</li>
                <li>• Speaking coach</li>
              </ul>
              <button class="mt-6 w-full rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way transition hover:bg-bw-way hover:text-white focus-ring" data-action="view-program" data-testid="program-pro">View program</button>
            </article>
            <article class="rounded-3xl border border-transparent bg-gradient-to-br from-white via-white to-slate-100 p-6 shadow-lg transition duration-200 hover:-translate-y-1 hover:border-bw-way hover:shadow-xl dark:from-slate-900 dark:via-slate-900 dark:to-slate-950" data-program="premium">
              <h3 class="text-xl font-semibold">Premium</h3>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300" data-i18n="programs.premium">Executive immersion with 1:1 mentorship, exam prep, and global networking.</p>
              <ul class="mt-4 space-y-2 text-sm">
                <li>• Unlimited sessions</li>
                <li>• Exam/project coaching</li>
                <li>• VIP community</li>
              </ul>
              <button class="mt-6 w-full rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way transition hover:bg-bw-way hover:text-white focus-ring" data-action="view-program" data-testid="program-premium">View program</button>
            </article>
          </div>
        </div>
        <aside class="flex-1 rounded-3xl border border-slate-200 bg-white p-6 shadow-lg dark:border-slate-800 dark:bg-slate-900" aria-live="polite">
          <h3 class="text-2xl font-semibold" data-i18n="programs.configTitle">Find your learning plan</h3>
          <form id="program-config" class="mt-6 space-y-4">
            <label class="block text-sm font-medium" data-i18n="programs.goalLabel">Your goal
              <select name="goal" class="mt-2 block w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
                <option value="career" data-i18n="programs.goalCareer">Career growth</option>
                <option value="exam" data-i18n="programs.goalExam">Exam preparation</option>
                <option value="travel" data-i18n="programs.goalTravel">Travel & culture</option>
                <option value="kids" data-i18n="programs.goalKids">For my child</option>
              </select>
            </label>
            <label class="block text-sm font-medium" data-i18n="programs.availabilityLabel">Availability
              <select name="availability" class="mt-2 block w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
                <option value="morning" data-i18n="programs.availabilityMorning">Morning</option>
                <option value="evening" data-i18n="programs.availabilityEvening">Evening</option>
                <option value="weekend" data-i18n="programs.availabilityWeekend">Weekend</option>
              </select>
            </label>
            <label class="block text-sm font-medium" data-i18n="programs.paymentLabel">Payment preference
              <select name="payment" class="mt-2 block w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
                <option value="monthly" data-i18n="programs.paymentMonthly">Monthly</option>
                <option value="quarterly" data-i18n="programs.paymentQuarterly">Quarterly</option>
                <option value="company" data-i18n="programs.paymentCompany">Company invoice</option>
              </select>
            </label>
            <div class="rounded-2xl bg-slate-50 p-4 text-sm dark:bg-slate-800">
              <p class="font-semibold" data-i18n="programs.suggestionTitle">Suggested plan</p>
              <p id="program-suggestion" class="mt-2 text-slate-600 dark:text-slate-300">Essential · 2 sessions/week · €96/month</p>
            </div>
            <button class="gradient-cta flex w-full items-center justify-center gap-2 rounded-full px-4 py-3 text-sm font-semibold text-white shadow focus-ring" data-action="open-free-class" data-testid="config-free-class">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 5v14m7-7H5"/></svg>
              <span data-i18n="ctas.book">Book your free class</span>
            </button>
            <div class="rounded-2xl bg-slate-100 p-4 text-xs text-slate-500 dark:bg-slate-800 dark:text-slate-300">
              <p data-i18n="programs.note">Prefer a custom plan? Our team answers within 2 hours.</p>
            </div>
          </form>
        </aside>
      </div>
      <div class="mt-12">
        <h3 class="text-2xl font-semibold" data-i18n="programs.faqTitle">Frequently asked questions</h3>
        <div class="mt-6 space-y-4" id="faq-accordion" role="region" aria-label="Program FAQ">
          <details class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900" data-question="certified">
            <summary class="flex cursor-pointer items-center justify-between text-base font-semibold focus-ring">
              <span data-i18n="faq.q1">Are BridgeWay teachers certified?</span>
            </summary>
            <p class="mt-3 text-sm text-slate-600 dark:text-slate-300" data-i18n="faq.a1">Yes. Every coach holds CELTA/DELTA or MA TESOL accreditation plus corporate training experience.</p>
          </details>
          <details class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900" data-question="results">
            <summary class="flex cursor-pointer items-center justify-between text-base font-semibold focus-ring">
              <span data-i18n="faq.q2">How fast will I see results?</span>
            </summary>
            <p class="mt-3 text-sm text-slate-600 dark:text-slate-300" data-i18n="faq.a2">Most learners move up one CEFR level in 12 weeks with two sessions weekly and smart homework.</p>
          </details>
          <details class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900" data-question="companies">
            <summary class="flex cursor-pointer items-center justify-between text-base font-semibold focus-ring">
              <span data-i18n="faq.q3">Do you offer company plans?</span>
            </summary>
            <p class="mt-3 text-sm text-slate-600 dark:text-slate-300" data-i18n="faq.a3">Yes. BridgeWay builds tailored academies for teams with analytics, invoicing, and onboarding support.</p>
          </details>
        </div>
      </div>
    </section>
    <section id="methodology" class="gradient-section py-16">
      <div class="mx-auto max-w-6xl px-4">
        <div class="flex flex-col gap-8 lg:flex-row lg:items-center">
          <div class="flex-1 space-y-4">
            <h2 class="text-3xl font-bold" data-i18n="methodology.title">The BridgeWay methodology</h2>
            <p class="text-lg text-slate-600 dark:text-slate-300" data-i18n="methodology.subtitle">Six checkpoints keep you motivated and accountable, from your level test to measurable results.</p>
            <div class="flex flex-wrap gap-4" id="methodology-timeline" role="tablist" aria-label="Methodology timeline">
              <button class="focus-ring rounded-2xl border border-bw-way/50 px-4 py-3 text-sm font-semibold transition hover:-translate-y-0.5" data-step="test" role="tab" aria-selected="true">Test</button>
              <button class="focus-ring rounded-2xl border border-transparent bg-white/70 px-4 py-3 text-sm font-semibold transition hover:-translate-y-0.5 dark:bg-slate-900/70" data-step="demo" role="tab" aria-selected="false">Demo Class</button>
              <button class="focus-ring rounded-2xl border border-transparent bg-white/70 px-4 py-3 text-sm font-semibold transition hover:-translate-y-0.5 dark:bg-slate-900/70" data-step="plan" role="tab" aria-selected="false">Plan</button>
              <button class="focus-ring rounded-2xl border border-transparent bg-white/70 px-4 py-3 text-sm font-semibold transition hover:-translate-y-0.5 dark:bg-slate-900/70" data-step="classes" role="tab" aria-selected="false">Classes</button>
              <button class="focus-ring rounded-2xl border border-transparent bg-white/70 px-4 py-3 text-sm font-semibold transition hover:-translate-y-0.5 dark:bg-slate-900/70" data-step="follow" role="tab" aria-selected="false">Follow-up</button>
              <button class="focus-ring rounded-2xl border border-transparent bg-white/70 px-4 py-3 text-sm font-semibold transition hover:-translate-y-0.5 dark:bg-slate-900/70" data-step="results" role="tab" aria-selected="false">Results</button>
            </div>
          </div>
          <div class="flex-1 rounded-3xl bg-white p-6 shadow-lg transition dark:bg-slate-900" id="methodology-content" role="tabpanel">
            <h3 class="text-2xl font-semibold" data-i18n="methodology.testTitle">Smart diagnostic test</h3>
            <p class="mt-3 text-slate-600 dark:text-slate-300" data-i18n="methodology.testCopy">Start with our adaptive CEFR test. It analyses grammar, speaking, and reading so your roadmap is exact.</p>
          </div>
        </div>
        <div class="mt-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
          <div class="rounded-2xl bg-white p-4 shadow dark:bg-slate-900"><p class="text-sm text-slate-500" data-i18n="methodology.metric1">+92% move up one level in 12 weeks*</p></div>
          <div class="rounded-2xl bg-white p-4 shadow dark:bg-slate-900"><p class="text-sm text-slate-500" data-i18n="methodology.metric2">4.9/5 average satisfaction</p></div>
          <div class="rounded-2xl bg-white p-4 shadow dark:bg-slate-900"><p class="text-sm text-slate-500" data-i18n="methodology.metric3">Learners in 38 countries</p></div>
          <div class="rounded-2xl bg-white p-4 shadow dark:bg-slate-900"><p class="text-sm text-slate-500" data-i18n="methodology.metric4">Footnote: internal review 2023</p></div>
        </div>
      </div>
    </section>
    <section id="teachers" class="mx-auto max-w-6xl px-4 py-16">
      <div class="flex flex-col gap-6">
        <div class="flex flex-col gap-6 lg:flex-row lg:items-end lg:justify-between">
          <div>
            <h2 class="text-3xl font-bold" data-i18n="teachers.title">Meet the BridgeWay faculty</h2>
            <p class="mt-2 text-lg text-slate-600 dark:text-slate-300" data-i18n="teachers.subtitle">Filter by area, certifications, and languages to find the perfect match.</p>
          </div>
          <div class="flex flex-wrap gap-3 text-sm">
            <label class="flex items-center gap-2"><span data-i18n="teachers.area">Area</span>
              <select id="teacher-area" class="rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
                <option value="all" data-i18n="teachers.areaAll">All</option>
                <option value="general" data-i18n="teachers.areaGeneral">General</option>
                <option value="business" data-i18n="teachers.areaBusiness">Business</option>
                <option value="exams" data-i18n="teachers.areaExams">Exams</option>
              </select>
            </label>
            <label class="flex items-center gap-2"><span data-i18n="teachers.cert">Certifications</span>
              <select id="teacher-cert" class="rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
                <option value="all" data-i18n="teachers.certAll">All</option>
                <option value="celta">CELTA</option>
                <option value="delta">DELTA</option>
                <option value="ma">MA TESOL</option>
              </select>
            </label>
            <label class="flex items-center gap-2"><span data-i18n="teachers.language">Languages</span>
              <select id="teacher-language" class="rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
                <option value="all" data-i18n="teachers.langAll">All</option>
                <option value="ru">Русский</option>
                <option value="ro">Română</option>
                <option value="es">Español</option>
              </select>
            </label>
          </div>
        </div>
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3" id="teacher-grid" aria-live="polite"></div>
        <button class="gradient-cta mx-auto flex items-center gap-2 rounded-full px-6 py-3 text-sm font-semibold text-white shadow focus-ring" data-action="open-free-class" data-testid="teacher-cta">
          <span data-i18n="teachers.cta">I want a class with the BridgeWay team</span>
        </button>
      </div>
    </section>
    <section id="pricing" class="gradient-section py-16">
      <div class="mx-auto max-w-6xl px-4">
        <div class="flex flex-col gap-6 lg:flex-row lg:items-start">
          <div class="flex-1 space-y-4">
            <h2 class="text-3xl font-bold" data-i18n="pricing.title">Pricing that adapts to your pace</h2>
            <p class="text-lg text-slate-600 dark:text-slate-300" data-i18n="pricing.subtitle">Toggle months, adjust weekly hours, and add coupons instantly. All plans include the BridgeWay guarantee.</p>
            <div class="flex items-center gap-3">
              <span class="text-sm font-medium" data-i18n="pricing.toggleMonthly">Monthly</span>
              <button id="billing-toggle" class="relative h-6 w-12 rounded-full bg-bw-way/40 transition focus-ring" role="switch" aria-checked="false" data-testid="billing-toggle">
                <span id="billing-thumb" class="absolute left-1 top-1 h-4 w-4 rounded-full bg-white shadow transition"></span>
              </button>
              <span class="text-sm font-medium" data-i18n="pricing.toggleQuarterly">Quarterly (save 12%)</span>
            </div>
            <div class="rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900">
              <label class="flex items-center justify-between text-sm font-medium" for="hours-slider">
                <span data-i18n="pricing.hoursLabel">Hours per week</span>
                <span id="hours-value">3h</span>
              </label>
              <input type="range" id="hours-slider" min="1" max="8" value="3" class="mt-4 w-full" />
              <label class="mt-4 block text-sm font-medium" data-i18n="pricing.couponLabel">Coupon
                <input id="coupon-input" type="text" class="mt-2 block w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950" placeholder="BRIDGE10" />
              </label>
              <button id="apply-coupon" class="mt-3 inline-flex items-center gap-2 rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way transition hover:bg-bw-way hover:text-white focus-ring" data-testid="coupon-apply">
                <span data-i18n="pricing.applyCoupon">Apply coupon</span>
              </button>
              <div class="mt-6 space-y-4 text-sm" id="pricing-summary"></div>
            </div>
          </div>
          <div class="flex-1 space-y-6">
            <div class="grid gap-6 sm:grid-cols-3">
              <div class="rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900" data-tier="essential">
                <h3 class="text-xl font-semibold">Essential</h3>
                <p class="mt-2 text-sm text-slate-600 dark:text-slate-300" data-i18n="pricing.essential">Perfect for rebuilding core grammar and speaking confidence.</p>
                <p class="mt-4 text-3xl font-bold" id="price-essential">€144</p>
                <p class="text-xs text-slate-500" data-i18n="pricing.perMonth">per month</p>
                <button class="mt-6 w-full rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way transition hover:bg-bw-way hover:text-white focus-ring" data-action="open-free-class" data-plan="Essential" data-testid="pricing-essential">Start now</button>
              </div>
              <div class="rounded-3xl border-2 border-bw-way bg-white p-6 shadow-lg dark:bg-slate-900" data-tier="pro">
                <h3 class="text-xl font-semibold">Pro</h3>
                <p class="mt-2 text-sm text-slate-600 dark:text-slate-300" data-i18n="pricing.pro">Ideal for meetings, presentations, and international expansion.</p>
                <p class="mt-4 text-3xl font-bold" id="price-pro">€192</p>
                <p class="text-xs text-slate-500" data-i18n="pricing.perMonth">per month</p>
                <button class="mt-6 w-full rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way transition hover:bg-bw-way hover:text-white focus-ring" data-action="open-free-class" data-plan="Pro" data-testid="pricing-pro">Start now</button>
              </div>
              <div class="rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900" data-tier="premium">
                <h3 class="text-xl font-semibold">Premium</h3>
                <p class="mt-2 text-sm text-slate-600 dark:text-slate-300" data-i18n="pricing.premium">Executive coaching, exam mastery, and concierge scheduling.</p>
                <p class="mt-4 text-3xl font-bold" id="price-premium">€264</p>
                <p class="text-xs text-slate-500" data-i18n="pricing.perMonth">per month</p>
                <button class="mt-6 w-full rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way transition hover:bg-bw-way hover:text-white focus-ring" data-action="open-free-class" data-plan="Premium" data-testid="pricing-premium">Start now</button>
              </div>
            </div>
            <div class="rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900">
              <div class="flex items-start gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-bw-way" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/></svg>
                <div>
                  <p class="text-sm font-semibold" data-i18n="pricing.guarantee">100% money-back guarantee</p>
                  <button class="mt-2 inline-flex items-center gap-1 text-xs font-semibold text-bw-way underline focus-ring" data-action="open-guarantee" data-testid="guarantee-link">
                    <span data-i18n="pricing.guaranteeLink">See conditions</span>
                  </button>
                </div>
              </div>
              <div class="mt-4 flex items-center gap-4">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='40'%3E%3Crect width='120' height='40' rx='8' fill='%23f1f5f9'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Inter' font-size='12' fill='%230A0F4C'%3EVisa%20Secure%3C/text%3E%3C/svg%3E" alt="Visa secure" loading="lazy" class="h-10" />
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='40'%3E%3Crect width='120' height='40' rx='8' fill='%23f1f5f9'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Inter' font-size='12' fill='%230A0F4C'%3EMastercard%203D%3C/text%3E%3C/svg%3E" alt="Mastercard secure" loading="lazy" class="h-10" />
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='40'%3E%3Crect width='120' height='40' rx='8' fill='%23f1f5f9'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Inter' font-size='12' fill='%230A0F4C'%3EStripe%20Atlas%3C/text%3E%3C/svg%3E" alt="Stripe" loading="lazy" class="h-10" />
              </div>
              <p class="mt-4 text-xs text-slate-500" data-i18n="pricing.trust">No commitment. Pause or cancel anytime.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section id="test" class="mx-auto max-w-6xl px-4 py-16">
      <div class="flex flex-col gap-6 lg:flex-row">
        <div class="flex-1 space-y-4">
          <h2 class="text-3xl font-bold" data-i18n="test.title">BridgeWay 10-minute level test</h2>
          <p class="text-lg text-slate-600 dark:text-slate-300" data-i18n="test.subtitle">Adaptive grammar, reading, and speaking with instant results. Resume anytime.</p>
          <div class="rounded-3xl bg-slate-100 p-6 text-sm dark:bg-slate-800">
            <div class="flex items-center justify-between"><span data-i18n="test.progress">Progress</span><span id="test-progress-label">0%</span></div>
            <div class="mt-2 h-2 rounded-full bg-white/70"><div id="test-progress" class="h-full rounded-full bg-gradient-to-r from-bw-bridge to-bw-way" style="width:0%"></div></div>
            <button id="resume-test" class="mt-4 hidden rounded-full border border-bw-way px-4 py-2 text-xs font-semibold text-bw-way focus-ring" data-testid="resume-test" data-i18n="test.resume">Resume saved test</button>
          </div>
          <div class="rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900" id="test-card"><div id="test-question" class="space-y-4"></div><div class="flex flex-wrap gap-3" id="test-actions"></div></div>
          <div class="rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900 hidden" id="test-result" aria-live="polite"></div>
        </div>
        <aside class="flex-1 space-y-4">
          <div class="rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900">
            <h3 class="text-xl font-semibold" data-i18n="test.sections">Sections</h3>
            <ol class="mt-4 space-y-2 text-sm">
              <li data-i18n="test.sectionGrammar">Grammar</li>
              <li data-i18n="test.sectionReading">Reading</li>
              <li data-i18n="test.sectionSpeaking">Speaking</li>
              <li data-i18n="test.sectionProgress">Progress</li>
              <li data-i18n="test.sectionResult">Result</li>
            </ol>
          </div>
          <div class="rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900">
            <h3 class="text-xl font-semibold" data-i18n="test.ctaTitle">Need a coach?</h3>
            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300" data-i18n="test.ctaCopy">Book a free class to transform your result into a personalised roadmap.</p>
            <button class="gradient-cta mt-4 w-full rounded-full px-4 py-3 text-sm font-semibold text-white focus-ring" data-action="open-free-class" data-testid="test-free-class">
              <span data-i18n="ctas.book">Book your free class</span>
            </button>
          </div>
        </aside>
      </div>
    </section>
    <section id="resources" class="gradient-section py-16">
      <div class="mx-auto max-w-6xl px-4">
        <div class="flex flex-col gap-6 lg:flex-row lg:items-start">
          <div class="flex-1 space-y-4">
            <h2 class="text-3xl font-bold" data-i18n="resources.title">BridgeWay resource library</h2>
            <p class="text-lg text-slate-600 dark:text-slate-300" data-i18n="resources.subtitle">Search guides, exercises, and videos tailored to your level. Reading time included.</p>
            <div class="rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900">
              <label class="block text-sm font-medium" data-i18n="resources.searchLabel">Search
                <input id="resource-search" list="resource-suggestions" type="search" class="mt-2 block w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950" placeholder="Business email" />
              </label>
              <datalist id="resource-suggestions"></datalist>
              <div class="mt-4 grid grid-cols-1 gap-3 text-sm">
                <label class="flex items-center justify-between"><span data-i18n="resources.filterLevel">Level</span>
                  <select id="resource-level" class="rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
                    <option value="all">All</option>
                    <option value="A2">A2</option>
                    <option value="B1">B1</option>
                    <option value="B2">B2</option>
                    <option value="C1">C1</option>
                  </select>
                </label>
                <label class="flex items-center justify-between"><span data-i18n="resources.filterType">Type</span>
                  <select id="resource-type" class="rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
                    <option value="all">All</option>
                    <option value="guide">Guide</option>
                    <option value="exercise">Exercise</option>
                    <option value="video">Video</option>
                  </select>
                </label>
                <label class="flex items-center justify-between"><span data-i18n="resources.filterGoal">Goal</span>
                  <select id="resource-goal" class="rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
                    <option value="all">All</option>
                    <option value="work">Work</option>
                    <option value="exam">Exam</option>
                    <option value="travel">Travel</option>
                  </select>
                </label>
              </div>
              <button id="resource-search-btn" class="mt-4 inline-flex items-center gap-2 rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way transition hover:bg-bw-way hover:text-white focus-ring" data-testid="resource-search">
                <span data-i18n="resources.searchBtn">Search library</span>
              </button>
            </div>
          </div>
          <div class="flex-1 space-y-6">
            <div class="grid gap-4" id="resource-list" aria-live="polite"></div>
            <article class="rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900" id="resource-detail" hidden>
              <h3 class="text-2xl font-semibold" id="resource-title">Resource title</h3>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300" id="resource-meta">B1 · Guide · 7 min read</p>
              <div class="prose prose-sm mt-4 dark:prose-invert" id="resource-content"></div>
              <div class="mt-6 space-y-2">
                <p class="text-xs font-semibold text-slate-500" data-i18n="resources.related">Related resources</p>
                <ul class="space-y-1 text-sm" id="resource-related"></ul>
              </div>
              <button class="gradient-cta mt-6 rounded-full px-4 py-2 text-sm font-semibold text-white focus-ring" data-action="open-test" data-testid="resource-test">
                <span data-i18n="ctas.test">Take the level test</span>
              </button>
            </article>
          </div>
        </div>
      </div>
    </section>
  </main>
  <footer class="bg-slate-950 py-12 text-slate-300">
    <div class="mx-auto flex max-w-6xl flex-col gap-8 px-4 md:flex-row md:justify-between">
      <div class="space-y-3">
        <span class="text-2xl font-bold text-white"><span class="text-white">Bridge</span><span class="text-bw-way">Way</span></span>
        <p class="text-sm" data-i18n="footer.copy">BridgeWay is the online English academy helping professionals speak with confidence.</p>
        <div class="flex gap-4 text-sm">
          <button class="underline focus-ring" data-action="open-terms" data-i18n="footer.terms">Terms</button>
          <button class="underline focus-ring" data-action="open-privacy" data-i18n="footer.privacy">Privacy</button>
        </div>
      </div>
      <div class="space-y-3 text-sm">
        <p data-i18n="footer.contact">Contact: hello@bridgeway.academy</p>
        <p data-i18n="footer.whatsapp">WhatsApp: +44 7441 432198 (international format)</p>
        <button class="underline focus-ring" data-action="open-free-class" data-testid="footer-free-class" data-i18n="ctas.book">Book your free class</button>
      </div>
      <div class="space-y-3 text-sm">
        <p data-i18n="footer.address">Registered in London, UK · VAT GB1234567</p>
        <p>&copy; <span id="current-year"></span> BridgeWay Academy</p>
      </div>
    </div>
  </footer>

  <div id="back-to-top" class="fixed bottom-24 right-4 hidden rounded-full bg-bw-way p-3 text-white shadow-lg transition hover:-translate-y-1 focus-ring" role="button" aria-label="Back to top">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m5 15 7-7 7 7"/></svg>
  </div>

  <div id="bottom-dock" class="fixed inset-x-0 bottom-0 z-40 flex items-center justify-around gap-2 border-t border-slate-200 bg-white/95 px-4 py-3 text-sm shadow-lg backdrop-blur md:hidden dark:border-slate-800 dark:bg-slate-900/95">
    <button class="flex flex-col items-center gap-1 focus-ring" data-action="open-free-class" data-testid="dock-free-class">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-bw-way" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 5v14m7-7H5"/></svg>
      <span data-i18n="ctas.book">Book your free class</span>
    </button>
    <button class="flex flex-col items-center gap-1 focus-ring" data-action="open-test" data-testid="dock-test">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-bw-way" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m12 6 6 6-6 6M6 6l6 6-6 6"/></svg>
      <span data-i18n="ctas.test">Take the level test</span>
    </button>
    <a class="flex flex-col items-center gap-1 focus-ring" href="https://wa.me/447441432198" target="_blank" rel="noopener" data-testid="dock-whatsapp">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-bw-way" fill="currentColor" viewBox="0 0 24 24"><path d="M12.04 2c-5.52 0-10 4.43-10 9.9 0 1.74.47 3.43 1.38 4.93L2 22l5.3-1.37a10.09 10.09 0 0 0 4.74 1.2h.01c5.53 0 10-4.44 10-9.9 0-5.47-4.47-9.9-10-9.9Zm5.91 14.09c-.25.7-1.24 1.29-1.72 1.33-.47.04-1.02.06-1.65-.1-.38-.1-.87-.28-1.5-.55-2.63-1.14-4.35-3.8-4.48-3.98-.13-.19-1.07-1.43-1.07-2.73 0-1.3.68-1.93.92-2.19.25-.26.55-.33.73-.33.19 0 .36.01.51.01.16 0 .39-.08.61.47.23.55.78 1.93.85 2.07.07.15.11.32.02.51-.09.19-.14.31-.27.47-.14.16-.29.36-.41.48-.14.14-.28.29-.12.57.16.26.71 1.16 1.52 1.88 1.05.94 1.94 1.23 2.23 1.37.29.14.46.12.63-.07.18-.2.73-.85.92-1.14.19-.29.4-.24.68-.14.29.11 1.83.87 2.14 1.02.31.15.52.24.6.37.08.12.08.71-.17 1.41Z"/></svg>
      <span data-i18n="ctas.whatsapp">Confirm via WhatsApp</span>
    </a>
  </div>

  <div id="chat-widget" class="fixed bottom-24 right-4 z-40 flex flex-col items-end gap-3">
    <div id="chat-panel" class="hidden w-72 rounded-3xl bg-white p-4 text-sm shadow-lg dark:bg-slate-900" role="dialog" aria-modal="true" aria-live="polite">
      <div class="flex items-center justify-between">
        <h3 class="text-base font-semibold" data-i18n="chat.title">How can BridgeWay help?</h3>
        <button class="rounded-full p-1 text-slate-500 focus-ring" data-action="toggle-chat" aria-label="Close chat">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m6 6 12 12M6 18 18 6"/></svg>
        </button>
      </div>
      <p class="mt-2 text-xs text-slate-500" data-i18n="chat.subtitle">Choose an option or type a keyword.</p>
      <div class="mt-4 space-y-2">
        <button class="w-full rounded-2xl bg-slate-100 px-3 py-2 text-left text-sm font-semibold focus-ring" data-action="open-free-class" data-testid="chat-book" data-i18n="chat.book">Book class</button>
        <button class="w-full rounded-2xl bg-slate-100 px-3 py-2 text-left text-sm font-semibold focus-ring" data-action="open-test" data-testid="chat-test" data-i18n="chat.test">Take the test</button>
        <button class="w-full rounded-2xl bg-slate-100 px-3 py-2 text-left text-sm font-semibold focus-ring" data-action="open-chat-form" data-testid="chat-question" data-i18n="chat.question">Quick question</button>
      </div>
      <label class="mt-4 block text-xs font-medium" data-i18n="chat.inputLabel">Type a keyword
        <input id="chat-input" type="text" class="mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950" placeholder="price, company, kids" />
      </label>
      <div id="chat-response" class="mt-3 text-xs text-slate-600 dark:text-slate-300"></div>
    </div>
    <button id="chat-toggle" class="rounded-full bg-gradient-to-br from-bw-way to-bw-bridge p-4 text-white shadow-lg transition hover:-translate-y-0.5 focus-ring" aria-expanded="false" data-testid="chat-toggle" aria-controls="chat-panel">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 8h10M7 12h6m-9 8h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2Z"/></svg>
    </button>
  </div>
  <div id="free-class-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-slate-900/70 px-4 py-8" role="dialog" aria-modal="true" aria-labelledby="free-class-title">
    <div class="max-h-[90vh] w-full max-w-3xl overflow-y-auto rounded-3xl bg-white p-6 shadow-xl dark:bg-slate-900">
      <div class="flex items-start justify-between gap-4">
        <div>
          <h2 id="free-class-title" class="text-2xl font-bold" data-i18n="modal.title">Book your free BridgeWay class</h2>
          <p class="mt-1 text-sm text-slate-600 dark:text-slate-300" data-i18n="modal.subtitle">Pick a timeslot within the next 10 business days. We confirm instantly.</p>
        </div>
        <button class="rounded-full p-2 text-slate-500 focus-ring" data-action="close-free-class" aria-label="Close modal">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 6 12 12M6 18 18 6"/></svg>
        </button>
      </div>
      <form id="free-class-form" class="mt-6 grid gap-4 md:grid-cols-2" novalidate>
        <label class="text-sm font-medium"><span data-i18n="modal.name">Name</span>
          <input required name="name" autocomplete="name" data-testid="form-name" class="mt-2 w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950" />
          <span class="mt-1 block text-xs text-rose-500" data-error="name"></span>
        </label>
        <label class="text-sm font-medium"><span data-i18n="modal.email">Email</span>
          <input required type="email" name="email" autocomplete="email" data-testid="form-email" class="mt-2 w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950" />
          <span class="mt-1 block text-xs text-rose-500" data-error="email"></span>
        </label>
        <label class="text-sm font-medium"><span data-i18n="modal.phone">Phone</span>
          <input required type="tel" inputmode="tel" name="phone" autocomplete="tel" data-testid="form-phone" class="mt-2 w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950" />
          <span class="mt-1 block text-xs text-rose-500" data-error="phone"></span>
        </label>
        <label class="text-sm font-medium"><span data-i18n="modal.goal">Goal</span>
          <select name="goal" class="mt-2 w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
            <option value="career" data-i18n="programs.goalCareer">Career growth</option>
            <option value="exam" data-i18n="programs.goalExam">Exam preparation</option>
            <option value="travel" data-i18n="programs.goalTravel">Travel & culture</option>
            <option value="kids" data-i18n="programs.goalKids">For my child</option>
            <option value="company" data-i18n="modal.goalCompany">Corporate training</option>
          </select>
        </label>
        <label class="text-sm font-medium"><span data-i18n="modal.age">Age (if for kids)</span>
          <input name="age" type="number" inputmode="numeric" min="4" max="70" class="mt-2 w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950" />
          <span class="mt-1 block text-xs text-rose-500" data-error="age"></span>
        </label>
        <label class="text-sm font-medium md:col-span-2"><span data-i18n="modal.slot">Select a timeslot</span>
          <div id="slot-grid" class="mt-2 grid grid-cols-2 gap-2 text-sm" role="group" aria-label="Available timeslots"></div>
          <span class="mt-1 block text-xs text-rose-500" data-error="slot"></span>
        </label>
        <label class="md:col-span-2 text-sm font-medium"><span data-i18n="modal.note">Anything we should know?</span>
          <textarea name="note" rows="3" class="mt-2 w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950"></textarea>
        </label>
        <div class="md:col-span-2 flex flex-wrap gap-3">
          <button type="submit" data-testid="form-submit" class="gradient-cta inline-flex items-center justify-center gap-2 rounded-full px-6 py-3 text-sm font-semibold text-white shadow focus-ring disabled:cursor-not-allowed disabled:opacity-60" disabled>
            <span data-i18n="modal.submit">Confirm booking</span>
          </button>
          <button type="button" class="rounded-full border border-slate-200 px-4 py-2 text-xs focus-ring dark:border-slate-700" data-action="save-draft" data-i18n="modal.save">Save draft</button>
        </div>
      </form>
      <div id="form-status" class="mt-4 text-sm" role="status"></div>
      <div id="form-success" class="mt-8 hidden rounded-3xl bg-slate-100 p-6 text-sm dark:bg-slate-800">
        <h3 class="text-xl font-semibold" data-i18n="modal.successTitle">You're booked!</h3>
        <p class="mt-2" data-i18n="modal.successSubtitle">We've saved the details below. Add the class to your calendar and confirm on WhatsApp.</p>
        <div class="mt-4 space-y-2">
          <div class="flex flex-wrap gap-2">
            <button class="rounded-full bg-white px-4 py-2 text-xs font-semibold text-bw-way shadow focus-ring" data-action="download-ics" data-testid="download-ics">
              <span data-i18n="modal.ics">Add to calendar (.ics)</span>
            </button>
            <a id="google-calendar" class="rounded-full bg-white px-4 py-2 text-xs font-semibold text-bw-way shadow focus-ring" target="_blank" rel="noopener" data-i18n="modal.google">Add to Google</a>
            <a id="apple-calendar" class="rounded-full bg-white px-4 py-2 text-xs font-semibold text-bw-way shadow focus-ring" target="_blank" rel="noopener" data-i18n="modal.apple">Add to Apple</a>
            <a id="outlook-calendar" class="rounded-full bg-white px-4 py-2 text-xs font-semibold text-bw-way shadow focus-ring" target="_blank" rel="noopener" data-i18n="modal.outlook">Add to Outlook</a>
          </div>
          <a id="whatsapp-confirm" class="inline-flex items-center gap-2 rounded-full bg-green-500 px-4 py-2 text-xs font-semibold text-white focus-ring" target="_blank" rel="noopener" data-testid="whatsapp-confirm">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12.04 2c-5.52 0-10 4.43-10 9.9 0 1.74.47 3.43 1.38 4.93L2 22l5.3-1.37a10.09 10.09 0 0 0 4.74 1.2h.01c5.53 0 10-4.44 10-9.9 0-5.47-4.47-9.9-10-9.9Zm5.91 14.09c-.25.7-1.24 1.29-1.72 1.33-.47.04-1.02.06-1.65-.1-.38-.1-.87-.28-1.5-.55-2.63-1.14-4.35-3.8-4.48-3.98-.13-.19-1.07-1.43-1.07-2.73 0-1.3.68-1.93.92-2.19.25-.26.55-.33.73-.33.19 0 .36.01.51.01.16 0 .39-.08.61.47.23.55.78 1.93.85 2.07.07.15.11.32.02.51-.09.19-.14.31-.27.47-.14.16-.29.36-.41.48-.14.14-.28.29-.12.57.16.26.71 1.16 1.52 1.88 1.05.94 1.94 1.23 2.23 1.37.29.14.46.12.63-.07.18-.2.73-.85.92-1.14.19-.29.4-.24.68-.14.29.11 1.83.87 2.14 1.02.31.15.52.24.6.37.08.12.08.71-.17 1.41Z"/></svg>
            <span data-i18n="ctas.whatsapp">Confirm via WhatsApp</span>
          </a>
          <p class="text-xs text-slate-500" data-i18n="modal.whatsappNote">We recommend confirming within 2 hours to secure the slot.</p>
        </div>
      </div>
    </div>
  </div>
  <div id="guarantee-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-slate-900/70 px-4 py-8" role="dialog" aria-modal="true">
    <div class="w-full max-w-lg rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900">
      <div class="flex items-start justify-between gap-4">
        <h2 class="text-xl font-semibold" data-i18n="guarantee.title">BridgeWay guarantee</h2>
        <button class="rounded-full p-2 text-slate-500 focus-ring" data-action="close-guarantee" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 6 12 12M6 18 18 6"/></svg>
        </button>
      </div>
      <p class="mt-3 text-sm text-slate-600 dark:text-slate-300" data-i18n="guarantee.copy">If you attend 80% of classes and complete assignments yet do not progress, we refund your last payment. No questions.</p>
    </div>
  </div>

  <div id="chat-form-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-slate-900/70 px-4 py-8" role="dialog" aria-modal="true">
    <div class="w-full max-w-md rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900">
      <div class="flex items-start justify-between gap-4">
        <h2 class="text-xl font-semibold" data-i18n="chatForm.title">Ask us anything</h2>
        <button class="rounded-full p-2 text-slate-500 focus-ring" data-action="close-chat-form" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 6 12 12M6 18 18 6"/></svg>
        </button>
      </div>
      <form id="chat-form" class="mt-4 space-y-3">
        <label class="block text-sm font-medium"><span data-i18n="chatForm.email">Email</span>
          <input type="email" name="email" required class="mt-1 w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950" />
        </label>
        <label class="block text-sm font-medium"><span data-i18n="chatForm.message">Question</span>
          <textarea name="message" rows="4" required class="mt-1 w-full rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950"></textarea>
        </label>
        <button type="submit" class="gradient-cta w-full rounded-full px-4 py-2 text-sm font-semibold text-white focus-ring" data-testid="chat-submit" data-i18n="chatForm.submit">Send</button>
      </form>
      <div id="chat-form-status" class="mt-3 text-sm"></div>
    </div>
  </div>

  <div id="terms-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-slate-900/70 px-4 py-8" role="dialog" aria-modal="true">
    <div class="w-full max-w-xl rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900">
      <div class="flex items-start justify-between gap-4">
        <h2 class="text-xl font-semibold" data-i18n="terms.title">Terms of service</h2>
        <button class="rounded-full p-2 text-slate-500 focus-ring" data-action="close-terms" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 6 12 12M6 18 18 6"/></svg>
        </button>
      </div>
      <p class="mt-3 text-sm text-slate-600 dark:text-slate-300" data-i18n="terms.copy">BridgeWay delivers online English coaching. By booking a class you agree to our usage policies and respectful conduct.</p>
    </div>
  </div>

  <div id="privacy-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-slate-900/70 px-4 py-8" role="dialog" aria-modal="true">
    <div class="w-full max-w-xl rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900">
      <div class="flex items-start justify-between gap-4">
        <h2 class="text-xl font-semibold" data-i18n="privacy.title">Privacy notice</h2>
        <button class="rounded-full p-2 text-slate-500 focus-ring" data-action="close-privacy" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 6 12 12M6 18 18 6"/></svg>
        </button>
      </div>
      <p class="mt-3 text-sm text-slate-600 dark:text-slate-300" data-i18n="privacy.copy">We store your data securely, respect GDPR, and never share personal information without consent.</p>
    </div>
  </div>

  <div id="consent-banner" class="fixed bottom-0 inset-x-0 z-50 hidden bg-slate-900/95 text-white">
    <div class="mx-auto flex max-w-5xl flex-col gap-4 px-4 py-4 sm:flex-row sm:items-center sm:justify-between">
      <p class="text-sm" data-i18n="consent.copy">BridgeWay uses cookies to improve experience and measure results. Accept to enable analytics.</p>
      <div class="flex flex-wrap gap-3 text-sm">
        <button id="consent-decline" class="rounded-full border border-white/40 px-4 py-2 focus-ring" data-i18n="consent.decline">Decline</button>
        <button id="consent-accept" class="rounded-full bg-white px-4 py-2 font-semibold text-bw-bridge focus-ring" data-i18n="consent.accept">Accept</button>
      </div>
    </div>
  </div>

  <div id="exit-intent" class="fixed inset-0 z-50 hidden items-center justify-center bg-slate-900/70 px-4 py-8" role="dialog" aria-modal="true">
    <div class="w-full max-w-md rounded-3xl bg-white p-6 shadow-lg dark:bg-slate-900">
      <div class="flex items-start justify-between gap-4">
        <h2 class="text-xl font-semibold" data-i18n="exit.title">Grab the free business English kit</h2>
        <button class="rounded-full p-2 text-slate-500 focus-ring" data-action="close-exit" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 6 12 12M6 18 18 6"/></svg>
        </button>
      </div>
      <p class="mt-3 text-sm text-slate-600 dark:text-slate-300" data-i18n="exit.copy">Download a PDF with quick templates for meetings and emails.</p>
      <button id="download-guide" class="mt-4 w-full rounded-full bg-bw-way px-4 py-2 text-sm font-semibold text-white focus-ring" data-testid="exit-download" data-i18n="exit.download">Download PDF</button>
    </div>
  </div>

  <div id="toast" class="pointer-events-none fixed top-20 left-1/2 z-50 hidden -translate-x-1/2 rounded-full bg-slate-900/90 px-6 py-3 text-sm text-white shadow-lg" role="status"></div>
  <div id="confetti" class="pointer-events-none fixed inset-0 z-50 hidden"></div>

  <aside id="admin-drawer" class="fixed inset-y-0 right-0 z-50 hidden w-full max-w-sm bg-white p-6 shadow-2xl dark:bg-slate-900" role="dialog" aria-modal="true">
    <div class="flex items-start justify-between">
      <div>
        <h2 class="text-xl font-semibold" data-i18n="admin.title">Admin & QA</h2>
        <p class="text-xs text-slate-500" data-i18n="admin.subtitle">Press Shift+L to toggle.</p>
      </div>
      <button class="rounded-full p-2 text-slate-500 focus-ring" data-action="close-admin" aria-label="Close admin">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m6 6 12 12M6 18 18 6"/></svg>
      </button>
    </div>
    <div class="mt-4 space-y-6 text-sm">
      <div>
        <label class="flex items-center justify-between">
          <span data-i18n="admin.variant">Variant</span>
          <select id="admin-variant" class="rounded-xl border-slate-200 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950">
            <option value="A">A</option>
            <option value="B">B</option>
          </select>
        </label>
      </div>
      <div class="space-y-2">
        <p class="font-semibold" data-i18n="admin.featureFlags">Feature flags</p>
        <label class="flex items-center justify-between"><span data-i18n="admin.flagExit">Exit intent</span><input type="checkbox" id="flag-exit" class="h-4 w-4 rounded border-slate-300 text-bw-way focus:ring-bw-way" /></label>
        <label class="flex items-center justify-between"><span data-i18n="admin.flagSticky">Sticky offer</span><input type="checkbox" id="flag-sticky" class="h-4 w-4 rounded border-slate-300 text-bw-way focus:ring-bw-way" /></label>
        <label class="flex items-center justify-between"><span data-i18n="admin.flagSpeech">Speech input</span><input type="checkbox" id="flag-speech" class="h-4 w-4 rounded border-slate-300 text-bw-way focus:ring-bw-way" /></label>
      </div>
      <div class="space-y-2">
        <p class="font-semibold" data-i18n="admin.leads">Leads</p>
        <div id="admin-leads" class="max-h-32 overflow-y-auto rounded-xl bg-slate-100 p-3 text-xs text-slate-600 dark:bg-slate-800 dark:text-slate-200"></div>
        <button id="export-leads" class="rounded-full border border-bw-way px-3 py-1 text-xs font-semibold text-bw-way focus-ring" data-testid="export-leads" data-i18n="admin.exportLeads">Export leads (.json)</button>
      </div>
      <div class="space-y-2">
        <p class="font-semibold" data-i18n="admin.results">Test results</p>
        <div id="admin-results" class="max-h-32 overflow-y-auto rounded-xl bg-slate-100 p-3 text-xs text-slate-600 dark:bg-slate-800 dark:text-slate-200"></div>
        <button id="export-results" class="rounded-full border border-bw-way px-3 py-1 text-xs font-semibold text-bw-way focus-ring" data-testid="export-results" data-i18n="admin.exportResults">Export results (.json)</button>
      </div>
      <div class="space-y-2">
        <button id="trigger-confetti" class="w-full rounded-full border border-bw-way px-4 py-2 text-xs font-semibold text-bw-way focus-ring" data-i18n="admin.confetti">Test confetti</button>
        <button id="trigger-toast" class="w-full rounded-full border border-bw-way px-4 py-2 text-xs font-semibold text-bw-way focus-ring" data-i18n="admin.toast">Test toast</button>
      </div>
    </div>
  </aside>

  <div id="analytics-log" class="fixed left-4 bottom-24 hidden max-h-60 w-72 overflow-y-auto rounded-2xl bg-slate-900/90 p-3 text-xs text-white shadow-lg"></div>
  <script>
    const CRM_WEBHOOK_URL = "";
    const EMAIL_WEBHOOK_URL = "";
    const BASE_PRICES = { essential: 12, pro: 16, premium: 22 };
    const COUPONS = { BRIDGE10: 0.10, BUSINESS15: 0.15 };
    const GA_MEASUREMENT_ID = "";

    const i18n = {
      en: {
        menu: { home: 'Home', programs: 'Programs', methodology: 'Methodology', teachers: 'Teachers', pricing: 'Pricing', resources: 'Resources', test: 'Level Test', free: 'Free Class' },
        ctas: { book: 'Book your free class', test: 'Take the level test', plan: 'Plan for companies', calendar: 'Add to calendar', whatsapp: 'Confirm via WhatsApp' },
        sticky: { offer: 'Free placement test today. Secure your spot in 2 minutes.' },
        hero: {
          badge: 'Decide in 5 seconds',
          title: 'BridgeWay English Academy. Decide in 5 seconds.',
          subtitle: 'Adaptive English programs that connect you to opportunities worldwide. Try a free live class and know your level instantly.',
          metric1: '92% move up one level in 12 weeks*',
          metric2: 'Average feedback score 4.9/5',
          snapshotTitle: 'Your BridgeWay snapshot',
          snapshotLevel: 'Level today',
          snapshotGoal: 'Goal',
          snapshotTime: 'Time to result',
          snapshotAction: 'Next step',
          snapshotActionValue: 'Book your free class',
          timerTitle: 'Live availability',
          timerSubtitle: 'Next coach opens a slot in:',
          slotCta: 'Reserve now',
          footnote: '*Based on BridgeWay student progress review 2023.'
        },
        breadcrumb: { home: 'Home', programs: 'Programs', current: 'Overview' },
        programs: {
          title: 'Programs designed for the way you work and live',
          subtitle: 'Choose from flexible pathways for professionals, students, and teams. Every option includes live coaching, progress analytics, and real business scenarios.',
          essential: 'Fast-track core skills with weekly live feedback and AI-powered practice.',
          pro: 'Advanced communication for meetings, negotiations, and leadership.',
          premium: 'Executive immersion with 1:1 mentorship, exam prep, and global networking.',
          configTitle: 'Find your learning plan',
          goalLabel: 'Your goal',
          availabilityLabel: 'Availability',
          paymentLabel: 'Payment preference',
          suggestionTitle: 'Suggested plan',
          note: 'Prefer a custom plan? Our team answers within 2 hours.',
          goalCareer: 'Career growth',
          goalExam: 'Exam preparation',
          goalTravel: 'Travel & culture',
          goalKids: 'For my child',
          availabilityMorning: 'Morning',
          availabilityEvening: 'Evening',
          availabilityWeekend: 'Weekend',
          paymentMonthly: 'Monthly',
          paymentQuarterly: 'Quarterly',
          paymentCompany: 'Company invoice',
          faqTitle: 'Frequently asked questions'
        },
        faq: {
          q1: 'Are BridgeWay teachers certified?',
          a1: 'Yes. Every coach holds CELTA/DELTA or MA TESOL accreditation plus corporate training experience.',
          q2: 'How fast will I see results?',
          a2: 'Most learners move up one CEFR level in 12 weeks with two sessions weekly and smart homework.',
          q3: 'Do you offer company plans?',
          a3: 'Yes. BridgeWay builds tailored academies for teams with analytics, invoicing, and onboarding support.'
        },
        methodology: {
          title: 'The BridgeWay methodology',
          subtitle: 'Six checkpoints keep you motivated and accountable, from your level test to measurable results.',
          testTitle: 'Smart diagnostic test',
          testCopy: 'Start with our adaptive CEFR test. It analyses grammar, speaking, and reading so your roadmap is exact.',
          demoTitle: 'Live demo class',
          demoCopy: 'Experience a full 20-minute session with feedback and actionable next steps.',
          planTitle: 'Personalized plan',
          planCopy: 'We define milestones, materials, and accountability with you.',
          classesTitle: 'Live classes + AI practice',
          classesCopy: 'Combine real coaches with guided AI simulations so you speak daily.',
          followTitle: 'Weekly follow-up',
          followCopy: 'Progress reviews keep you on track and adapt to your pace.',
          resultsTitle: 'Visible results',
          resultsCopy: 'See level gains, confidence metrics, and receive certificates.',
          metric1: '+92% move up one level in 12 weeks*',
          metric2: '4.9/5 average satisfaction',
          metric3: 'Learners in 38 countries',
          metric4: 'Footnote: internal review 2023'
        },
        teachers: {
          title: 'Meet the BridgeWay faculty',
          subtitle: 'Filter by area, certifications, and languages to find the perfect match.',
          area: 'Area', areaAll: 'All', areaGeneral: 'General', areaBusiness: 'Business', areaExams: 'Exams',
          cert: 'Certifications', certAll: 'All',
          language: 'Languages', langAll: 'All',
          cta: 'I want a class with the BridgeWay team'
        },
        pricing: {
          title: 'Pricing that adapts to your pace',
          subtitle: 'Toggle months, adjust weekly hours, and add coupons instantly. All plans include the BridgeWay guarantee.',
          toggleMonthly: 'Monthly',
          toggleQuarterly: 'Quarterly (save 12%)',
          hoursLabel: 'Hours per week',
          couponLabel: 'Coupon',
          applyCoupon: 'Apply coupon',
          essential: 'Perfect for rebuilding core grammar and speaking confidence.',
          pro: 'Ideal for meetings, presentations, and international expansion.',
          premium: 'Executive coaching, exam mastery, and concierge scheduling.',
          perMonth: 'per month',
          guarantee: '100% money-back guarantee',
          guaranteeLink: 'See conditions',
          trust: 'No commitment. Pause or cancel anytime.'
        },
        test: {
          title: 'BridgeWay 10-minute level test',
          subtitle: 'Adaptive grammar, reading, and speaking with instant results. Resume anytime.',
          progress: 'Progress',
          resume: 'Resume saved test',
          sections: 'Sections',
          sectionGrammar: 'Grammar',
          sectionReading: 'Reading',
          sectionSpeaking: 'Speaking',
          sectionProgress: 'Progress',
          sectionResult: 'Result',
          ctaTitle: 'Need a coach?',
          ctaCopy: 'Book a free class to transform your result into a personalised roadmap.'
        },
        resources: {
          title: 'BridgeWay resource library',
          subtitle: 'Search guides, exercises, and videos tailored to your level. Reading time included.',
          searchLabel: 'Search',
          filterLevel: 'Level',
          filterType: 'Type',
          filterGoal: 'Goal',
          searchBtn: 'Search library',
          related: 'Related resources'
        },
        footer: {
          copy: 'BridgeWay is the online English academy helping professionals speak with confidence.',
          terms: 'Terms',
          privacy: 'Privacy',
          contact: 'Contact: hello@bridgeway.academy',
          whatsapp: 'WhatsApp: +44 7441 432198 (international format)',
          address: 'Registered in London, UK · VAT GB1234567'
        },
        chat: { title: 'How can BridgeWay help?', subtitle: 'Choose an option or type a keyword.', book: 'Book class', test: 'Take the test', question: 'Quick question', inputLabel: 'Type a keyword' },
        modal: {
          title: 'Book your free BridgeWay class',
          subtitle: 'Pick a timeslot within the next 10 business days. We confirm instantly.',
          name: 'Name', email: 'Email', phone: 'Phone', goal: 'Goal', goalCompany: 'Corporate training', age: 'Age (if for kids)', slot: 'Select a timeslot', note: 'Anything we should know?',
          submit: 'Confirm booking', save: 'Save draft', successTitle: "You're booked!", successSubtitle: 'We\'ve saved the details below. Add the class to your calendar and confirm on WhatsApp.',
          ics: 'Add to calendar (.ics)', google: 'Add to Google', apple: 'Add to Apple', outlook: 'Add to Outlook', whatsappNote: 'We recommend confirming within 2 hours to secure the slot.'
        },
        consent: { copy: 'BridgeWay uses cookies to improve experience and measure results. Accept to enable analytics.', decline: 'Decline', accept: 'Accept' },
        exit: { title: 'Grab the free business English kit', copy: 'Download a PDF with quick templates for meetings and emails.', download: 'Download PDF' },
        admin: { title: 'Admin & QA', subtitle: 'Press Shift+L to toggle.', variant: 'Variant', featureFlags: 'Feature flags', flagExit: 'Exit intent', flagSticky: 'Sticky offer', flagSpeech: 'Speech input', leads: 'Leads', exportLeads: 'Export leads (.json)', results: 'Test results', exportResults: 'Export results (.json)', confetti: 'Test confetti', toast: 'Test toast' },
        guarantee: { title: 'BridgeWay guarantee', copy: 'If you attend 80% of classes and complete assignments yet do not progress, we refund your last payment. No questions.' },
        chatForm: { title: 'Ask us anything', email: 'Email', message: 'Question', submit: 'Send', success: 'Message sent. We respond within 2 hours.' },
        privacy: { title: 'Privacy notice', copy: 'We store your data securely, respect GDPR, and never share personal information without consent.' },
        terms: { title: 'Terms of service', copy: 'BridgeWay delivers online English coaching. By booking a class you agree to our usage policies and respectful conduct.' },
        stickyBar: { copy: 'Free placement test today only.' }
      },
      ru: {
        menu: { home: 'Главная', programs: 'Программы', methodology: 'Методика', teachers: 'Преподаватели', pricing: 'Цены', resources: 'Ресурсы', test: 'Тест', free: 'Бесплатный урок' },
        ctas: { book: 'Запишись на бесплатный урок', test: 'Пройди тест на уровень', plan: 'План для компаний', calendar: 'Добавить в календарь', whatsapp: 'Подтвердить в WhatsApp' },
        sticky: { offer: 'Бесплатный тест сегодня. Забронируй место за 2 минуты.' },
        hero: {
          badge: 'Реши за 5 секунд',
          title: 'Онлайн-академия BridgeWay. Реши за 5 секунд.',
          subtitle: 'Адаптивные программы английского, которые открывают возможности. Попробуй бесплатный урок и мгновенно узнай свой уровень.',
          metric1: '92% повышают уровень за 12 недель*',
          metric2: 'Средняя оценка 4.9/5',
          snapshotTitle: 'Твой профиль BridgeWay',
          snapshotLevel: 'Текущий уровень',
          snapshotGoal: 'Цель',
          snapshotTime: 'Срок результата',
          snapshotAction: 'Следующий шаг',
          snapshotActionValue: 'Запишись на бесплатный урок',
          timerTitle: 'Свободные места',
          timerSubtitle: 'Следующий тренер освободится через:',
          slotCta: 'Забронировать',
          footnote: '*По данным BridgeWay 2023.'
        },
        breadcrumb: { home: 'Главная', programs: 'Программы', current: 'Обзор' },
        programs: {
          title: 'Программы под твою работу и стиль жизни',
          subtitle: 'Выбирай гибкие траектории для профессионалов, студентов и команд. Везде есть живые уроки, аналитика и реальные кейсы.',
          essential: 'Ускорь базовые навыки с еженедельной обратной связью и ИИ-практикой.',
          pro: 'Продвинутый английский для встреч, переговоров и лидерства.',
          premium: 'Executive-программа с наставником, подготовкой к экзаменам и нетворкингом.',
          configTitle: 'Подбери план обучения',
          goalLabel: 'Твоя цель',
          availabilityLabel: 'Доступность',
          paymentLabel: 'Способ оплаты',
          suggestionTitle: 'Рекомендованный план',
          note: 'Нужен особый график? Ответим за 2 часа.',
          goalCareer: 'Карьерный рост',
          goalExam: 'Подготовка к экзаменам',
          goalTravel: 'Путешествия и культура',
          goalKids: 'Для ребёнка',
          availabilityMorning: 'Утро',
          availabilityEvening: 'Вечер',
          availabilityWeekend: 'Выходные',
          paymentMonthly: 'Ежемесячно',
          paymentQuarterly: 'Ежеквартально',
          paymentCompany: 'Счет для компании',
          faqTitle: 'Частые вопросы'
        },
        faq: {
          q1: 'Преподаватели BridgeWay сертифицированы?',
          a1: 'Да. Все тренеры имеют CELTA/DELTA или магистратуру TESOL и корпоративный опыт.',
          q2: 'Как быстро я увижу результат?',
          a2: 'Большинство студентов повышают уровень CEFR за 12 недель при двух уроках в неделю и умных заданиях.',
          q3: 'Есть программы для компаний?',
          a3: 'Да. BridgeWay создаёт корпоративные академии с аналитикой, счетами и поддержкой.'
        },
        methodology: {
          title: 'Методика BridgeWay',
          subtitle: 'Шесть этапов поддерживают мотивацию и контроль от теста до результата.',
          testTitle: 'Умный диагностический тест',
          testCopy: 'Начни с адаптивного теста CEFR. Он оценивает грамматику, речь и чтение, чтобы план был точным.',
          demoTitle: 'Демо-урок',
          demoCopy: 'Полноценный 20-минутный урок с обратной связью и шагами.',
          planTitle: 'Персональный план',
          planCopy: 'Согласуем цели, материалы и контроль вместе с тобой.',
          classesTitle: 'Уроки + ИИ-практика',
          classesCopy: 'Живые тренеры и симуляции, чтобы говорить каждый день.',
          followTitle: 'Еженедельный прогресс',
          followCopy: 'Регулярные обзоры помогают не сбиваться.',
          resultsTitle: 'Видимый результат',
          resultsCopy: 'Фиксируем рост уровня, уверенности и выдаем сертификаты.',
          metric1: '92% повышают уровень за 12 недель*',
          metric2: 'Средняя оценка 4.9/5',
          metric3: 'Студенты из 38 стран',
          metric4: 'Источник: внутренний отчет 2023'
        },
        teachers: {
          title: 'Команда BridgeWay', subtitle: 'Фильтруй по направлению, сертификатам и языкам.',
          area: 'Направление', areaAll: 'Все', areaGeneral: 'Общий', areaBusiness: 'Бизнес', areaExams: 'Экзамены',
          cert: 'Сертификаты', certAll: 'Все',
          language: 'Языки', langAll: 'Все',
          cta: 'Хочу урок с командой BridgeWay'
        },
        pricing: {
          title: 'Цены под твой ритм', subtitle: 'Переключай периоды, меняй часы и применяй купоны. Гарантия BridgeWay включена.',
          toggleMonthly: 'Ежемесячно', toggleQuarterly: 'Ежеквартально (экономия 12%)', hoursLabel: 'Часов в неделю', couponLabel: 'Купон', applyCoupon: 'Применить купон',
          essential: 'Восстанови базу и уверенность в разговоре.', pro: 'Подходит для встреч, презентаций и международных проектов.', premium: 'Эксклюзив с наставником, экзаменами и гибким графиком.',
          perMonth: 'в месяц', guarantee: '100% гарантия возврата', guaranteeLink: 'Условия', trust: 'Без обязательств. Отмена в любой момент.'
        },
        test: {
          title: '10-минутный тест BridgeWay', subtitle: 'Адаптивные задания по грамматике, чтению и говорению. Результат сразу.',
          progress: 'Прогресс', resume: 'Продолжить сохранённый тест', sections: 'Разделы', sectionGrammar: 'Грамматика', sectionReading: 'Чтение', sectionSpeaking: 'Говорение', sectionProgress: 'Прогресс', sectionResult: 'Результат', ctaTitle: 'Нужен тренер?', ctaCopy: 'Запишись на бесплатный урок, чтобы получить личный план.'
        },
        resources: {
          title: 'Библиотека BridgeWay', subtitle: 'Ищи гайды, упражнения и видео для своего уровня. С указанием времени.', searchLabel: 'Поиск', filterLevel: 'Уровень', filterType: 'Тип', filterGoal: 'Цель', searchBtn: 'Искать', related: 'Похожие материалы'
        },
        footer: {
          copy: 'BridgeWay помогает профессионалам говорить свободно.', terms: 'Условия', privacy: 'Конфиденциальность', contact: 'Контакт: hello@bridgeway.academy', whatsapp: 'WhatsApp: +44 7441 432198 (международный формат)', address: 'Зарегистрировано в Лондоне, Великобритания · VAT GB1234567'
        },
        chat: { title: 'Чем помочь?', subtitle: 'Выбери опцию или введи ключевое слово.', book: 'Записаться', test: 'Пройти тест', question: 'Задать вопрос', inputLabel: 'Введи ключевое слово' },
        modal: {
          title: 'Забронируй бесплатный урок BridgeWay', subtitle: 'Выбери слот в ближайшие 10 рабочих дней. Подтверждение мгновенно.', name: 'Имя', email: 'Email', phone: 'Телефон', goal: 'Цель', goalCompany: 'Корпоративное обучение', age: 'Возраст (для детей)', slot: 'Выбери время', note: 'Что важно знать?',
          submit: 'Подтвердить бронь', save: 'Сохранить черновик', successTitle: 'Урок забронирован!', successSubtitle: 'Мы сохранили данные. Добавь урок в календарь и подтверди в WhatsApp.', ics: 'Добавить в календарь (.ics)', google: 'Добавить в Google', apple: 'Добавить в Apple', outlook: 'Добавить в Outlook', whatsappNote: 'Рекомендуем подтвердить в течение 2 часов.'
        },
        consent: { copy: 'BridgeWay использует cookies для улучшения сервиса и аналитики. Нажми принять, чтобы включить аналитику.', decline: 'Отклонить', accept: 'Принять' },
        exit: { title: 'Получите набор Business English', copy: 'Скачайте PDF с шаблонами для встреч и писем.', download: 'Скачать PDF' },
        admin: { title: 'Админ и QA', subtitle: 'Нажмите Shift+L.', variant: 'Вариант', featureFlags: 'Фичи', flagExit: 'Exit-intent', flagSticky: 'Промо-бар', flagSpeech: 'Речь', leads: 'Лиды', exportLeads: 'Экспорт лидов (.json)', results: 'Результаты теста', exportResults: 'Экспорт результатов (.json)', confetti: 'Проверить конфетти', toast: 'Проверить уведомление' },
        guarantee: { title: 'Гарантия BridgeWay', copy: 'Если ты посещаешь 80% занятий и выполняешь задания, но не растёшь, возвращаем оплату.' },
        chatForm: { title: 'Задай вопрос', email: 'Email', message: 'Сообщение', submit: 'Отправить', success: 'Сообщение отправлено. Ответим в течение 2 часов.' },
        privacy: { title: 'Политика конфиденциальности', copy: 'Мы защищаем данные и соблюдаем GDPR.' },
        terms: { title: 'Пользовательское соглашение', copy: 'Бронируя урок, вы соглашаетесь с правилами использования и этикой.' },
        stickyBar: { copy: 'Бесплатный тест только сегодня.' }
      },
      ro: {
        menu: { home: 'Acasă', programs: 'Programe', methodology: 'Metodologie', teachers: 'Profesori', pricing: 'Prețuri', resources: 'Resurse', test: 'Test de nivel', free: 'Lecție gratuită' },
        ctas: { book: 'Programează lecția gratuită', test: 'Fă testul de nivel', plan: 'Plan pentru companii', calendar: 'Adaugă în calendar', whatsapp: 'Confirmă pe WhatsApp' },
        sticky: { offer: 'Test de nivel gratuit azi. Rezervă în 2 minute.' },
        hero: {
          badge: 'Decide în 5 secunde',
          title: 'Academia BridgeWay. Decide în 5 secunde.',
          subtitle: 'Programe adaptive de engleză care te conectează la oportunități globale. Încearcă lecția gratuită și află nivelul imediat.',
          metric1: '92% urcă un nivel în 12 săptămâni*',
          metric2: 'Scor mediu 4.9/5',
          snapshotTitle: 'Profilul tău BridgeWay',
          snapshotLevel: 'Nivel actual',
          snapshotGoal: 'Obiectiv',
          snapshotTime: 'Timp până la rezultat',
          snapshotAction: 'Următorul pas',
          snapshotActionValue: 'Programează lecția gratuită',
          timerTitle: 'Disponibilitate live',
          timerSubtitle: 'Următorul coach este liber în:',
          slotCta: 'Rezervă acum',
          footnote: '*Pe baza raportului BridgeWay 2023.'
        },
        breadcrumb: { home: 'Acasă', programs: 'Programe', current: 'Prezentare' },
        programs: {
          title: 'Programe create pentru modul tău de lucru și viață',
          subtitle: 'Alege trasee flexibile pentru profesioniști, studenți și echipe. Include sesiuni live, analitice și scenarii reale.',
          essential: 'Accelerează abilitățile de bază cu feedback săptămânal și practică asistată de AI.',
          pro: 'Comunicare avansată pentru ședințe, negocieri și leadership.',
          premium: 'Imersiune executivă cu mentorat 1:1, pregătire examene și networking.',
          configTitle: 'Găsește planul de învățare',
          goalLabel: 'Obiectivul tău',
          availabilityLabel: 'Disponibilitate',
          paymentLabel: 'Preferință de plată',
          suggestionTitle: 'Plan recomandat',
          note: 'Plan personalizat? Răspundem în 2 ore.',
          goalCareer: 'Dezvoltare profesională',
          goalExam: 'Pregătire examene',
          goalTravel: 'Călătorii & cultură',
          goalKids: 'Pentru copilul meu',
          availabilityMorning: 'Dimineața',
          availabilityEvening: 'Seara',
          availabilityWeekend: 'Weekend',
          paymentMonthly: 'Lunar',
          paymentQuarterly: 'Trimestrial',
          paymentCompany: 'Factură companie',
          faqTitle: 'Întrebări frecvente'
        },
        faq: {
          q1: 'Profesorii BridgeWay sunt certificați?', a1: 'Da. Toți trainerii au certificări CELTA/DELTA sau master TESOL și experiență corporativă.',
          q2: 'Cât de repede văd rezultatele?', a2: 'Majoritatea cursanților urcă un nivel CEFR în 12 săptămâni cu două sesiuni pe săptămână.',
          q3: 'Aveți planuri pentru companii?', a3: 'Da. BridgeWay construiește academii pentru echipe cu analitice și facturare.'
        },
        methodology: {
          title: 'Metodologia BridgeWay', subtitle: 'Șase etape care mențin motivația și responsabilitatea până la rezultate măsurabile.',
          testTitle: 'Test diagnostic inteligent', testCopy: 'Începi cu testul adaptiv CEFR pentru gramatică, vorbire și citire.',
          demoTitle: 'Lecție demonstrativă', demoCopy: 'Trăiește o sesiune de 20 de minute cu feedback și următorii pași.',
          planTitle: 'Plan personalizat', planCopy: 'Stabilim obiective, materiale și responsabilități împreună.',
          classesTitle: 'Lecții live + practică AI', classesCopy: 'Antrenori reali și simulări ghidate pentru a vorbi zilnic.',
          followTitle: 'Follow-up săptămânal', followCopy: 'Revizuiri regulate pentru a rămâne pe traseu.',
          resultsTitle: 'Rezultate vizibile', resultsCopy: 'Vezi progresul, primești rapoarte și certificate.',
          metric1: '92% urcă un nivel în 12 săptămâni*', metric2: 'Scor mediu 4.9/5', metric3: 'Cursanți în 38 de țări', metric4: 'Notă: raport intern 2023'
        },
        teachers: {
          title: 'Echipa BridgeWay', subtitle: 'Filtrează după domeniu, certificări și limbi.', area: 'Domeniu', areaAll: 'Toate', areaGeneral: 'General', areaBusiness: 'Business', areaExams: 'Examene',
          cert: 'Certificări', certAll: 'Toate', language: 'Limbi', langAll: 'Toate', cta: 'Vreau o lecție cu echipa BridgeWay'
        },
        pricing: {
          title: 'Prețuri flexibile', subtitle: 'Schimbă perioada, ajustează orele și aplică cupoane instant.', toggleMonthly: 'Lunar', toggleQuarterly: 'Trimestrial (economisești 12%)', hoursLabel: 'Ore pe săptămână', couponLabel: 'Cupon', applyCoupon: 'Aplică cuponul',
          essential: 'Ideal pentru consolidarea gramaticii și încrederii.', pro: 'Pentru ședințe, prezentări și proiecte internaționale.', premium: 'Coaching executiv, examene și program flexibil.', perMonth: 'pe lună', guarantee: 'Garanție 100% returnare', guaranteeLink: 'Vezi condițiile', trust: 'Fără obligații. Poți întrerupe oricând.'
        },
        test: {
          title: 'Test BridgeWay de 10 minute', subtitle: 'Gramatică, citire și vorbire adaptivă cu rezultat imediat.', progress: 'Progres', resume: 'Reia testul salvat', sections: 'Secțiuni', sectionGrammar: 'Gramatică', sectionReading: 'Citire', sectionSpeaking: 'Vorbire', sectionProgress: 'Progres', sectionResult: 'Rezultat', ctaTitle: 'Ai nevoie de coach?', ctaCopy: 'Programează lecția gratuită pentru un plan personalizat.'
        },
        resources: {
          title: 'Biblioteca BridgeWay', subtitle: 'Caută ghiduri, exerciții și video pentru nivelul tău.', searchLabel: 'Căutare', filterLevel: 'Nivel', filterType: 'Tip', filterGoal: 'Obiectiv', searchBtn: 'Caută', related: 'Resurse similare'
        },
        footer: {
          copy: 'BridgeWay ajută profesioniștii să vorbească cu încredere.', terms: 'Termeni', privacy: 'Confidențialitate', contact: 'Contact: hello@bridgeway.academy', whatsapp: 'WhatsApp: +44 7441 432198 (format internațional)', address: 'Înregistrat în Londra, Marea Britanie · VAT GB1234567'
        },
        chat: { title: 'Cum te putem ajuta?', subtitle: 'Alege o opțiune sau scrie un cuvânt cheie.', book: 'Programează', test: 'Fă testul', question: 'Întrebare rapidă', inputLabel: 'Scrie un cuvânt cheie' },
        modal: {
          title: 'Programează lecția gratuită BridgeWay', subtitle: 'Alege un interval în următoarele 10 zile lucrătoare. Confirmăm imediat.', name: 'Nume', email: 'Email', phone: 'Telefon', goal: 'Obiectiv', goalCompany: 'Training pentru companii', age: 'Vârsta (pentru copii)', slot: 'Alege intervalul', note: 'Ce ar trebui să știm?',
          submit: 'Confirmă rezervarea', save: 'Salvează draftul', successTitle: 'Rezervarea este gata!', successSubtitle: 'Am salvat detaliile. Adaugă lecția în calendar și confirmă pe WhatsApp.', ics: 'Adaugă în calendar (.ics)', google: 'Adaugă în Google', apple: 'Adaugă în Apple', outlook: 'Adaugă în Outlook', whatsappNote: 'Confirmă în 2 ore pentru a păstra locul.'
        },
        consent: { copy: 'BridgeWay folosește cookie-uri pentru experiență și analize. Acceptă pentru a activa analitica.', decline: 'Refuz', accept: 'Accept' },
        exit: { title: 'Ia ghidul Business English', copy: 'Descarcă PDF-ul cu șabloane rapide pentru întâlniri și emailuri.', download: 'Descarcă PDF' },
        admin: { title: 'Admin și QA', subtitle: 'Apasă Shift+L.', variant: 'Variantă', featureFlags: 'Funcții', flagExit: 'Exit intent', flagSticky: 'Bară promo', flagSpeech: 'Intrare vocală', leads: 'Lead-uri', exportLeads: 'Export lead-uri (.json)', results: 'Rezultate test', exportResults: 'Export rezultate (.json)', confetti: 'Testează confetti', toast: 'Testează notificarea' },
        guarantee: { title: 'Garanția BridgeWay', copy: 'Dacă participi la 80% din lecții și nu avansezi, îți returnăm plata.' },
        chatForm: { title: 'Adresează o întrebare', email: 'Email', message: 'Mesaj', submit: 'Trimite', success: 'Mesaj trimis. Revenim în 2 ore.' },
        privacy: { title: 'Notă de confidențialitate', copy: 'Îți protejăm datele și respectăm GDPR.' },
        terms: { title: 'Termeni de utilizare', copy: 'Prin rezervare accepți regulile și etica BridgeWay.' },
        stickyBar: { copy: 'Test gratuit de plasament azi.' }
      }
    };
    const resourcesData = [
      { id: 'email-guide', title: 'Business Email Templates', level: 'B2', type: 'guide', goal: 'work', minutes: 7, content: '<p>Structure your emails with a clear opening, action, and closing. Includes phrases for follow-ups and negotiations.</p>' },
      { id: 'presentation-video', title: 'Presentation Hooks Video', level: 'B1', type: 'video', goal: 'work', minutes: 5, content: '<p>Watch quick hooks that keep audiences engaged in English presentations.</p>' },
      { id: 'phrasal-exercise', title: 'Phrasal Verbs Workout', level: 'B1', type: 'exercise', goal: 'exam', minutes: 10, content: '<p>Interactive quiz on phrasal verbs with immediate feedback.</p>' },
      { id: 'listening-kit', title: 'Listening Kit for Meetings', level: 'C1', type: 'guide', goal: 'work', minutes: 8, content: '<p>Strategies for active listening in complex meetings.</p>' },
      { id: 'travel-dialogues', title: 'Travel Dialogues Practice', level: 'A2', type: 'exercise', goal: 'travel', minutes: 9, content: '<p>Role-plays for airport, hotel, and dining situations.</p>' }
    ];

    const teachersData = [
      { name: 'Lena Morozova', area: 'business', cert: 'celta', languages: ['ru', 'en'], experience: 8, bio: 'Former HR lead guiding tech teams.', video: 'https://samplelib.com/lib/preview/mp4/sample-5s.mp4', badges: ['CELTA', 'IELTS Specialist'] },
      { name: 'Daniel Popescu', area: 'general', cert: 'ma', languages: ['ro', 'en', 'es'], experience: 10, bio: 'Helps professionals speak confidently in meetings.', video: 'https://samplelib.com/lib/preview/mp4/sample-5s.mp4', badges: ['MA TESOL', 'Cambridge Speaking Examiner'] },
      { name: 'Amelia Hart', area: 'exams', cert: 'delta', languages: ['en', 'ru'], experience: 12, bio: 'DELTA-certified exam coach with British Council background.', video: 'https://samplelib.com/lib/preview/mp4/sample-5s.mp4', badges: ['DELTA', 'CELTA', 'IELTS Expert'] },
      { name: 'Matei Ionescu', area: 'business', cert: 'celta', languages: ['ro', 'en'], experience: 6, bio: 'Focus on business storytelling and negotiations.', video: 'https://samplelib.com/lib/preview/mp4/sample-5s.mp4', badges: ['CELTA', 'MBA'] },
      { name: 'Sarah Bennett', area: 'general', cert: 'ma', languages: ['en', 'es'], experience: 9, bio: 'Creates immersive lessons with real-life tasks.', video: 'https://samplelib.com/lib/preview/mp4/sample-5s.mp4', badges: ['MA Applied Linguistics'] },
      { name: 'Igor Sokolov', area: 'exams', cert: 'delta', languages: ['ru', 'en'], experience: 15, bio: 'Specialist in Cambridge and IELTS preparation.', video: 'https://samplelib.com/lib/preview/mp4/sample-5s.mp4', badges: ['DELTA', 'Examiner'] }
    ];

    const grammarQuestions = [
      { id: 'g1', text: 'Choose the correct option: If I ___ more time, I would finish the report.', options: ['have', 'had', 'will have'], answer: 'had', explanation: 'Use past simple in the if-clause for second conditional.', difficulty: 2 },
      { id: 'g2', text: 'Find the correct form: She has worked here ___ 2018.', options: ['for', 'since', 'by'], answer: 'since', explanation: 'Since + specific time.', difficulty: 1 },
      { id: 'g3', text: 'Pick the best word: The results ___ by Friday.', options: ['will send', 'will be sent', 'are sending'], answer: 'will be sent', explanation: 'Passive future simple.', difficulty: 2 },
      { id: 'g4', text: 'Choose the correct phrase: Hardly ___ the call when the client joined.', options: ['I started', 'had I started', 'I had start'], answer: 'had I started', explanation: 'Inversion with hardly + past perfect.', difficulty: 3 },
      { id: 'g5', text: 'Select the option: We need someone who ___ Spanish.', options: ['speaks', 'speak', 'is speak'], answer: 'speaks', explanation: 'Relative clause requires third person singular.', difficulty: 1 },
      { id: 'g6', text: 'Best choice: The report must ___ by tomorrow.', options: ['complete', 'be completed', 'completed'], answer: 'be completed', explanation: 'Modal + be + past participle.', difficulty: 2 },
      { id: 'g7', text: 'Choose correct tense: By next July, I ___ for the company for ten years.', options: ['will work', 'will have worked', 'am working'], answer: 'will have worked', explanation: 'Future perfect for duration by future time.', difficulty: 3 },
      { id: 'g8', text: 'Correct option: If only he ___ more confident!', options: ['is', 'were', 'was'], answer: 'were', explanation: 'If only + past subjunctive uses were.', difficulty: 3 },
      { id: 'g9', text: 'Pick the word: We had the contract ___ by legal.', options: ['check', 'checked', 'checking'], answer: 'checked', explanation: 'Have + object + past participle.', difficulty: 2 },
      { id: 'g10', text: 'Choose: Neither the team nor the manager ___ happy with the delay.', options: ['are', 'is', 'be'], answer: 'is', explanation: 'Verb agrees with the nearest subject.', difficulty: 2 },
      { id: 'g11', text: 'Select the phrase: This is the first time I ___ a pitch in English.', options: ['have delivered', 'deliver', 'delivered'], answer: 'have delivered', explanation: 'First time + present perfect.', difficulty: 2 },
      { id: 'g12', text: 'Best option: I wish we ___ informed earlier.', options: ['were', 'had been', 'have been'], answer: 'had been', explanation: 'Wish about the past uses past perfect.', difficulty: 3 }
    ];

    const readingPassage = {
      text: 'BridgeWay partners with global companies to build confident teams. Learners attend short weekly sprints focused on real scenarios, receive AI-assisted feedback, and track improvements inside a dashboard. Managers see progress at a glance and adjust goals instantly.',
      question: 'What is one benefit for managers using BridgeWay?',
      options: ['They can adjust goals instantly using the dashboard.', 'They attend every class with the team.', 'They no longer need to provide feedback.'],
      answer: 'They can adjust goals instantly using the dashboard.',
      explanation: 'The passage states that managers see progress and adjust goals instantly.'
    };

    const levelBands = [
      { level: 'A1', min: 0, max: 20 },
      { level: 'A2', min: 21, max: 40 },
      { level: 'B1', min: 41, max: 60 },
      { level: 'B2', min: 61, max: 80 },
      { level: 'C1', min: 81, max: 95 },
      { level: 'C2', min: 96, max: 120 }
    ];

    let state = {
      locale: 'en',
      theme: 'system',
      variant: 'A',
      billing: 'monthly',
      coupon: null,
      hours: 3,
      reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)').matches,
      leads: JSON.parse(localStorage.getItem('bridgeway-leads') || '[]'),
      results: JSON.parse(localStorage.getItem('bridgeway-results') || '[]'),
      testProgress: JSON.parse(localStorage.getItem('bridgeway-test-progress') || 'null'),
      utm: Object.fromEntries(new URLSearchParams(location.search)),
      referrer: document.referrer,
      flags: {
        exit: JSON.parse(localStorage.getItem('bridgeway-flag-exit') || 'true'),
        sticky: JSON.parse(localStorage.getItem('bridgeway-flag-sticky') || 'true'),
        speech: JSON.parse(localStorage.getItem('bridgeway-flag-speech') || 'true')
      }
    };

    const eventQueue = [];
    let analyticsEnabled = false;
    const elements = {};
    document.addEventListener('DOMContentLoaded', () => {
      cacheElements();
      initYear();
      initLocale();
      initTheme();
      initHeader();
      initHero();
      initPrograms();
      initFAQ();
      initMethodology();
      initTeachers();
      initPricing();
      initTest();
      initResources();
      initChat();
      initModals();
      initBackToTop();
      initConsent();
      initAnalytics();
      initAdmin();
      initOfferBar();
      initExitIntent();
      initServiceWorker();
      initManifest();
      if (state.testProgress) showResumeBanner();
      if (state.reducedMotion) document.body.dataset.reducedMotion = 'true';
    });

    function cacheElements() {
      elements.language = document.getElementById('language-switcher');
      elements.header = document.getElementById('main-header');
      elements.mobileMenu = document.getElementById('mobile-menu');
      elements.mobileNav = document.getElementById('mobile-nav');
      elements.heroSecondary = document.querySelector('[data-testid="hero-secondary"]');
      elements.heroVariantLabel = document.getElementById('hero-variant-label');
      elements.heroCtas = document.getElementById('hero-ctas');
      elements.programSuggestion = document.getElementById('program-suggestion');
      elements.billingToggle = document.getElementById('billing-toggle');
      elements.billingThumb = document.getElementById('billing-thumb');
      elements.hoursSlider = document.getElementById('hours-slider');
      elements.hoursValue = document.getElementById('hours-value');
      elements.pricingSummary = document.getElementById('pricing-summary');
      elements.priceEssential = document.getElementById('price-essential');
      elements.pricePro = document.getElementById('price-pro');
      elements.pricePremium = document.getElementById('price-premium');
      elements.testQuestion = document.getElementById('test-question');
      elements.testActions = document.getElementById('test-actions');
      elements.testProgress = document.getElementById('test-progress');
      elements.testProgressLabel = document.getElementById('test-progress-label');
      elements.testResult = document.getElementById('test-result');
      elements.resumeTest = document.getElementById('resume-test');
      elements.resourceList = document.getElementById('resource-list');
      elements.resourceDetail = document.getElementById('resource-detail');
      elements.resourceTitle = document.getElementById('resource-title');
      elements.resourceMeta = document.getElementById('resource-meta');
      elements.resourceContent = document.getElementById('resource-content');
      elements.resourceRelated = document.getElementById('resource-related');
      elements.resourceSearch = document.getElementById('resource-search');
      elements.resourceSearchBtn = document.getElementById('resource-search-btn');
      elements.resourceLevel = document.getElementById('resource-level');
      elements.resourceType = document.getElementById('resource-type');
      elements.resourceGoal = document.getElementById('resource-goal');
      elements.resourceSuggestions = document.getElementById('resource-suggestions');
      elements.chatPanel = document.getElementById('chat-panel');
      elements.chatToggle = document.getElementById('chat-toggle');
      elements.chatInput = document.getElementById('chat-input');
      elements.chatResponse = document.getElementById('chat-response');
      elements.backToTop = document.getElementById('back-to-top');
      elements.stickyOffer = document.getElementById('sticky-offer');
      elements.exitIntent = document.getElementById('exit-intent');
      elements.downloadGuide = document.getElementById('download-guide');
      elements.toast = document.getElementById('toast');
      elements.confetti = document.getElementById('confetti');
      elements.freeClassModal = document.getElementById('free-class-modal');
      elements.freeClassForm = document.getElementById('free-class-form');
      elements.slotGrid = document.getElementById('slot-grid');
      elements.formStatus = document.getElementById('form-status');
      elements.formSuccess = document.getElementById('form-success');
      elements.googleCalendar = document.getElementById('google-calendar');
      elements.appleCalendar = document.getElementById('apple-calendar');
      elements.outlookCalendar = document.getElementById('outlook-calendar');
      elements.whatsappConfirm = document.getElementById('whatsapp-confirm');
      elements.adminDrawer = document.getElementById('admin-drawer');
      elements.adminVariant = document.getElementById('admin-variant');
      elements.flagExit = document.getElementById('flag-exit');
      elements.flagSticky = document.getElementById('flag-sticky');
      elements.flagSpeech = document.getElementById('flag-speech');
      elements.adminLeads = document.getElementById('admin-leads');
      elements.adminResults = document.getElementById('admin-results');
      elements.analyticsLog = document.getElementById('analytics-log');
      elements.consentBanner = document.getElementById('consent-banner');
      elements.heroParallax = document.getElementById('hero-parallax');
      elements.scrollDown = document.getElementById('scroll-down');
      elements.themeToggle = document.getElementById('theme-toggle');
      elements.themeIcon = document.getElementById('theme-icon');
    }
    function initYear() {
      document.getElementById('current-year').textContent = new Date().getFullYear();
    }

    function initLocale() {
      const saved = localStorage.getItem('bridgeway-locale');
      if (saved && i18n[saved]) state.locale = saved;
      elements.language.value = state.locale;
      elements.language.addEventListener('change', (event) => {
        state.locale = event.target.value;
        localStorage.setItem('bridgeway-locale', state.locale);
        updateLocale();
        logEvent('locale_change', { locale: state.locale });
      });
      updateLocale();
    }

    function updateLocale() {
      document.documentElement.lang = state.locale;
      const strings = i18n[state.locale];
      document.querySelectorAll('[data-i18n]').forEach((el) => {
        const keys = el.dataset.i18n.split('.');
        let value = strings;
        for (const key of keys) {
          if (value && key in value) value = value[key];
        }
        if (typeof value === 'string') {
          if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
            el.setAttribute('placeholder', value);
          } else {
            el.textContent = value;
          }
        }
      });
      updateMeta(strings);
      populateFAQSchema();
      populateBreadcrumbs();
      refreshProgramSuggestion();
      renderResources(resourcesData);
      renderTeachers();
    }

    function updateMeta(strings) {
      document.title = strings.hero?.title || 'BridgeWay';
      const description = strings.hero?.subtitle || 'BridgeWay academy';
      document.querySelector('meta[name="description"]').setAttribute('content', description);
      document.querySelector('meta[property="og:description"]').setAttribute('content', description);
      document.querySelector('meta[name="twitter:description"]').setAttribute('content', description);
    }

    function initTheme() {
      const saved = localStorage.getItem('bridgeway-theme');
      if (saved) {
        state.theme = saved;
      } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        state.theme = 'dark';
      } else {
        state.theme = 'light';
      }
      applyTheme();
      elements.themeToggle.addEventListener('click', () => {
        state.theme = state.theme === 'dark' ? 'light' : 'dark';
        localStorage.setItem('bridgeway-theme', state.theme);
        applyTheme();
      });
    }

    function applyTheme() {
      document.documentElement.classList.toggle('dark', state.theme === 'dark');
      elements.themeIcon.innerHTML = state.theme === 'dark'
        ? '<path d="M21 12.79A9 9 0 0 1 11.21 3 7 7 0 1 0 21 12.79Z" />'
        : '<path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12Zm0-16a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1Zm0 16a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0v-2a1 1 0 0 1 1-1ZM4 11a1 1 0 0 1 1 1 7 7 0 0 0 7 7 1 1 0 1 1 0 2 9 9 0 0 1-9-9 1 1 0 0 1 1-1Zm16 0a1 1 0 0 1 1 1 9 9 0 0 1-9 9 1 1 0 1 1 0-2 7 7 0 0 0 7-7 1 1 0 0 1 1-1Z" />';
    }
    function initHeader() {
      elements.mobileMenu.addEventListener('click', () => {
        const expanded = elements.mobileMenu.getAttribute('aria-expanded') === 'true';
        elements.mobileMenu.setAttribute('aria-expanded', String(!expanded));
        elements.mobileNav.classList.toggle('hidden', expanded);
      });
      window.addEventListener('scroll', () => {
        const scrolled = window.scrollY > 40;
        elements.header.classList.toggle('shadow-lg', scrolled);
        elements.header.classList.toggle('py-3', scrolled);
        elements.header.classList.toggle('py-5', !scrolled);
        elements.backToTop.classList.toggle('hidden', window.scrollY < window.innerHeight / 2);
      });
      elements.backToTop.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
      document.querySelectorAll('[data-action="open-free-class"]').forEach((btn) => {
        btn.addEventListener('click', () => openFreeClass(btn.dataset.plan || null));
      });
      document.querySelectorAll('[data-action="open-test"]').forEach((btn) => {
        btn.addEventListener('click', () => {
          document.getElementById('test').scrollIntoView({ behavior: 'smooth' });
          logEvent('cta_click', { label: 'test' });
        });
      });
      elements.scrollDown.addEventListener('click', () => {
        document.getElementById('programs').scrollIntoView({ behavior: 'smooth' });
      });
    }

    function initHero() {
      const params = new URLSearchParams(location.search);
      if ((params.get('variant') || '').toUpperCase() === 'B') {
        state.variant = 'B';
      }
      const ref = state.utm.ref || state.utm.referrer || state.referrer;
      if (ref && ref.includes('/business')) {
        elements.heroSecondary.dataset.action = 'open-free-class';
        elements.heroSecondary.querySelector('span').textContent = i18n[state.locale].ctas.plan;
      }
      updateHeroVariant();
      animateTimer();
      if (!state.reducedMotion) {
        window.addEventListener('scroll', () => {
          const offset = window.scrollY * 0.2;
          elements.heroParallax.style.transform = `translateY(${offset}px)`;
        });
      }
    }

    function updateHeroVariant() {
      elements.heroVariantLabel.textContent = `Variant ${state.variant}`;
      document.body.dataset.variant = state.variant;
      if (state.variant === 'B') {
        elements.heroCtas.append(elements.heroSecondary);
      }
      logEvent('ab_variant', { variant: state.variant });
    }

    function animateTimer() {
      let seconds = 9 * 60 + 12;
      const tick = () => {
        const m = String(Math.floor(seconds / 60)).padStart(2, '0');
        const s = String(seconds % 60).padStart(2, '0');
        const display = document.getElementById('slot-timer');
        if (display) display.textContent = `00:${m}:${s}`;
        seconds = seconds > 0 ? seconds - 1 : 9 * 60 + 12;
      };
      tick();
      setInterval(tick, 1000);
    }
    function initPrograms() {
      document.querySelectorAll('[data-action="view-program"]').forEach((btn) => {
        btn.addEventListener('click', () => {
          const program = btn.closest('[data-program]').dataset.program;
          const suggestion = {
            essential: 'Essential · 2 sessions/week · €' + BASE_PRICES.essential * state.hours,
            pro: 'Pro · 3 sessions/week · €' + BASE_PRICES.pro * state.hours,
            premium: 'Premium · unlimited · €' + BASE_PRICES.premium * (state.hours + 4)
          }[program];
          elements.programSuggestion.textContent = suggestion;
          openFreeClass(program.charAt(0).toUpperCase() + program.slice(1));
          logEvent('button_click', { label: 'view_program', program });
        });
      });
      document.getElementById('program-config').addEventListener('change', refreshProgramSuggestion);
    }

    function refreshProgramSuggestion() {
      const form = new FormData(document.getElementById('program-config'));
      const goal = form.get('goal');
      const availability = form.get('availability');
      const payment = form.get('payment');
      let recommendation = 'Essential · 2 sessions/week';
      if (goal === 'career' && availability !== 'morning') recommendation = 'Pro · 3 sessions/week';
      if (goal === 'exam') recommendation = 'Premium · exam focus';
      if (payment === 'company') recommendation += ' · invoiced to company';
      elements.programSuggestion.textContent = `${recommendation} · €${calculatePrice('pro').total.toFixed(0)}/${payment === 'quarterly' ? 'quarter' : 'month'}`;
    }

    function initFAQ() {
      document.querySelectorAll('#faq-accordion details').forEach((detail) => {
        detail.addEventListener('toggle', () => {
          if (detail.open) logEvent('button_click', { label: 'faq_open', question: detail.dataset.question });
        });
      });
    }

    function initMethodology() {
      const map = {
        test: ['testTitle', 'testCopy'],
        demo: ['demoTitle', 'demoCopy'],
        plan: ['planTitle', 'planCopy'],
        classes: ['classesTitle', 'classesCopy'],
        follow: ['followTitle', 'followCopy'],
        results: ['resultsTitle', 'resultsCopy']
      };
      document.querySelectorAll('#methodology-timeline [role="tab"]').forEach((btn) => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('#methodology-timeline [role="tab"]').forEach((el) => el.setAttribute('aria-selected', 'false'));
          btn.setAttribute('aria-selected', 'true');
          const [titleKey, copyKey] = map[btn.dataset.step];
          const strings = i18n[state.locale].methodology;
          document.querySelector('#methodology-content h3').textContent = strings[titleKey];
          document.querySelector('#methodology-content p').textContent = strings[copyKey];
        });
      });
    }

    function initTeachers() {
      ['teacher-area', 'teacher-cert', 'teacher-language'].forEach((id) => {
        document.getElementById(id).addEventListener('change', renderTeachers);
      });
      renderTeachers();
    }

    function renderTeachers() {
      const area = document.getElementById('teacher-area').value;
      const cert = document.getElementById('teacher-cert').value;
      const language = document.getElementById('teacher-language').value;
      const grid = document.getElementById('teacher-grid');
      grid.innerHTML = '';
      teachersData
        .filter((teacher) => area === 'all' || teacher.area === area)
        .filter((teacher) => cert === 'all' || teacher.cert === cert)
        .filter((teacher) => language === 'all' || teacher.languages.includes(language))
        .forEach((teacher) => {
          const card = document.createElement('article');
          card.className = 'rounded-3xl border border-transparent bg-white p-6 shadow-lg transition hover:-translate-y-1 dark:bg-slate-900';
          card.innerHTML = `
            <div class="flex items-center gap-3">
              <span class="inline-flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-bw-way to-bw-bridge text-lg font-semibold text-white">${teacher.name.split(' ').map((n) => n[0]).join('')}</span>
              <div>
                <h3 class="text-lg font-semibold">${teacher.name}</h3>
                <p class="text-xs text-slate-500">${teacher.badges.join(' · ')}</p>
              </div>
            </div>
            <p class="mt-4 text-sm text-slate-600 dark:text-slate-300">${teacher.bio}</p>
            <p class="mt-2 text-xs text-slate-500">${teacher.experience} years experience · ${teacher.languages.join(', ').toUpperCase()}</p>
            <button class="mt-4 inline-flex items-center gap-2 rounded-full border border-bw-way px-3 py-2 text-xs font-semibold text-bw-way focus-ring" data-video="${teacher.video}" aria-expanded="false">
              <span>Watch 20s intro</span>
            </button>
            <video class="mt-3 hidden w-full rounded-2xl" controls preload="none" data-testid="teacher-video">
              <source src="${teacher.video}" type="video/mp4" />
            </video>
          `;
          const toggle = card.querySelector('button');
          const video = card.querySelector('video');
          toggle.addEventListener('click', () => {
            const expanded = toggle.getAttribute('aria-expanded') === 'true';
            toggle.setAttribute('aria-expanded', String(!expanded));
            video.classList.toggle('hidden', expanded);
            if (!expanded) {
              video.play();
            } else {
              video.pause();
              video.currentTime = 0;
            }
            logEvent('button_click', { label: 'teacher_video', teacher: teacher.name });
          });
          grid.appendChild(card);
        });
    }
    function initPricing() {
      elements.billingToggle.addEventListener('click', () => {
        state.billing = state.billing === 'monthly' ? 'quarterly' : 'monthly';
        elements.billingToggle.setAttribute('aria-checked', state.billing === 'quarterly');
        elements.billingThumb.style.transform = state.billing === 'quarterly' ? 'translateX(24px)' : 'translateX(0)';
        updatePricing();
      });
      elements.hoursSlider.addEventListener('input', () => {
        state.hours = Number(elements.hoursSlider.value);
        elements.hoursValue.textContent = `${state.hours}h`;
        updatePricing();
      });
      document.getElementById('apply-coupon').addEventListener('click', applyCoupon);
      updatePricing();
    }

    function applyCoupon() {
      const code = document.getElementById('coupon-input').value.trim().toUpperCase();
      if (COUPONS[code]) {
        state.coupon = code;
        showToast(`${code} applied`);
        logEvent('coupon_applied', { code });
      } else {
        state.coupon = null;
        showToast('Coupon not valid', true);
      }
      updatePricing();
    }

    function calculatePrice(tier) {
      const base = BASE_PRICES[tier];
      const multiplier = state.billing === 'monthly' ? 4 : 12 * 0.88;
      const weekly = base * state.hours;
      const subtotal = weekly * multiplier;
      const discount = state.coupon ? subtotal * COUPONS[state.coupon] : 0;
      const total = subtotal - discount;
      return { weekly, subtotal, discount, total };
    }

    function updatePricing() {
      ['essential', 'pro', 'premium'].forEach((tier) => {
        const { total } = calculatePrice(tier);
        const el = document.getElementById(`price-${tier}`);
        if (el) el.textContent = `€${Math.round(total)}`;
      });
      const essential = calculatePrice('essential');
      elements.pricingSummary.innerHTML = `
        <div class="flex items-center justify-between"><span>Subtotal</span><span>€${essential.subtotal.toFixed(2)}</span></div>
        <div class="flex items-center justify-between"><span>Discount</span><span class="text-emerald-500">€-${essential.discount.toFixed(2)}</span></div>
        <div class="flex items-center justify-between font-semibold text-bw-way"><span>Total</span><span>€${essential.total.toFixed(2)}</span></div>
      `;
    }

    function initTest() {
      elements.testState = { step: 'grammar', index: 0, score: 0, answers: [] };
      elements.testActions.innerHTML = '';
      elements.testQuestion.innerHTML = '';
      document.getElementById('test-card').classList.remove('hidden');
      renderGrammarQuestion();
      elements.resumeTest.addEventListener('click', () => {
        if (state.testProgress) {
          elements.testState = state.testProgress;
          resumeTestState();
        }
      });
    }

    function renderGrammarQuestion() {
      const q = grammarQuestions[elements.testState.index];
      if (!q) return renderReading();
      elements.testQuestion.innerHTML = `<h3 class="text-xl font-semibold">Grammar ${elements.testState.index + 1}/12</h3><p class="text-sm text-slate-600 dark:text-slate-300">${q.text}</p>`;
      elements.testActions.innerHTML = '';
      q.options.forEach((option) => {
        const button = document.createElement('button');
        button.className = 'rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way focus-ring hover:bg-bw-way hover:text-white';
        button.textContent = option;
        button.addEventListener('click', () => {
          const correct = option === q.answer;
          if (correct) {
            elements.testState.score += 10 * q.difficulty;
            showToast('Correct!');
          } else {
            showToast(q.explanation, true);
          }
          elements.testState.answers.push({ id: q.id, correct, option });
          elements.testState.index += 1;
          adaptDifficulty(correct);
          saveTestProgress();
          renderGrammarQuestion();
        });
        elements.testActions.appendChild(button);
      });
      updateProgress();
    }

    function adaptDifficulty(correct) {
      const recent = elements.testState.answers.slice(-5);
      const ratio = recent.length ? recent.filter((a) => a.correct).length / recent.length : 1;
      if (ratio > 0.8) {
        elements.testState.score += 5;
      } else if (ratio < 0.5) {
        elements.testState.score -= 3;
      }
    }

    function renderReading() {
      elements.testState.step = 'reading';
      elements.testQuestion.innerHTML = `<h3 class="text-xl font-semibold">Reading</h3><p class="text-sm text-slate-600 dark:text-slate-300">${readingPassage.text}</p><p class="mt-4 font-medium">${readingPassage.question}</p>`;
      elements.testActions.innerHTML = '';
      readingPassage.options.forEach((option) => {
        const button = document.createElement('button');
        button.className = 'rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way focus-ring hover:bg-bw-way hover:text-white';
        button.textContent = option;
        button.addEventListener('click', () => {
          const correct = option === readingPassage.answer;
          if (correct) {
            elements.testState.score += 15;
            showToast('Great!');
          } else {
            showToast(readingPassage.explanation, true);
          }
          elements.testState.answers.push({ id: 'reading', correct, option });
          saveTestProgress();
          renderSpeaking();
        });
        elements.testActions.appendChild(button);
      });
      updateProgress();
    }

    function renderSpeaking() {
      elements.testState.step = 'speaking';
      elements.testQuestion.innerHTML = `<h3 class="text-xl font-semibold">Speaking (30s)</h3><p class="text-sm text-slate-600 dark:text-slate-300">Describe your last successful project in 3 sentences.</p>`;
      elements.testActions.innerHTML = '';
      const startBtn = document.createElement('button');
      startBtn.className = 'rounded-full border border-bw-way px-4 py-2 text-sm font-semibold text-bw-way focus-ring hover:bg-bw-way hover:text-white';
      startBtn.textContent = 'Start recording';
      const fallbackArea = document.createElement('textarea');
      fallbackArea.className = 'mt-4 w-full rounded-xl border border-slate-200 p-3 text-sm focus:ring-bw-way dark:border-slate-700 dark:bg-slate-950 hidden';
      fallbackArea.rows = 4;
      elements.testActions.appendChild(startBtn);
      elements.testActions.appendChild(fallbackArea);
      if (state.flags.speech && ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {
        startBtn.addEventListener('click', () => startSpeechRecognition(fallbackArea));
      } else {
        fallbackArea.classList.remove('hidden');
        startBtn.textContent = 'Submit response';
        startBtn.addEventListener('click', () => finishSpeaking(fallbackArea.value));
      }
      updateProgress();
    }
    function startSpeechRecognition(fallbackArea) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) {
        fallbackArea.classList.remove('hidden');
        showToast('Speech not supported', true);
        return;
      }
      const recognition = new SpeechRecognition();
      recognition.lang = state.locale === 'ru' ? 'ru-RU' : state.locale === 'ro' ? 'ro-RO' : 'en-US';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;
      recognition.start();
      showToast('Listening...');
      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        finishSpeaking(transcript);
      };
      recognition.onerror = () => {
        fallbackArea.classList.remove('hidden');
        showToast('Type your answer instead.', true);
        const button = document.querySelector('#test-actions button');
        if (button) {
          button.textContent = 'Submit response';
          button.onclick = () => finishSpeaking(fallbackArea.value);
        }
      };
    }

    function finishSpeaking(response) {
      const words = response ? response.trim().split(/\s+/).length : 0;
      elements.testState.answers.push({ id: 'speaking', response, words });
      elements.testState.score += Math.min(words, 50);
      saveTestProgress();
      renderResult();
    }

    function renderResult() {
      elements.testState.step = 'result';
      localStorage.removeItem('bridgeway-test-progress');
      const score = Math.max(0, Math.min(120, elements.testState.score));
      const band = levelBands.find((band) => score >= band.min && score <= band.max) || levelBands[levelBands.length - 1];
      elements.testQuestion.innerHTML = '<h3 class="text-xl font-semibold">Result</h3><p class="text-sm">Thank you! Check your CEFR level below.</p>';
      elements.testActions.innerHTML = '';
      elements.testResult.innerHTML = `
        <h3 class="text-2xl font-semibold text-bw-way">${band.level}</h3>
        <p class="mt-2 text-sm">Score: ${score} / 120</p>
        <p class="mt-2 text-sm">${getLevelRecommendation(band.level)}</p>
        <div class="mt-4 flex flex-wrap gap-2">
          <button class="rounded-full border border-bw-way px-4 py-2 text-xs font-semibold text-bw-way focus-ring" id="download-results">Download results (.json)</button>
          <button class="rounded-full border border-bw-way px-4 py-2 text-xs font-semibold text-bw-way focus-ring" id="copy-summary">Copy summary</button>
          <button class="gradient-cta rounded-full px-4 py-2 text-xs font-semibold text-white focus-ring" data-action="open-free-class" data-testid="result-free-class">${i18n[state.locale].ctas.book}</button>
        </div>
      `;
      elements.testResult.classList.remove('hidden');
      document.getElementById('download-results').addEventListener('click', downloadTestResults);
      document.getElementById('copy-summary').addEventListener('click', copyTestSummary);
      const resultPayload = {
        locale: state.locale,
        score,
        level: band.level,
        answers: elements.testState.answers,
        createdAt: new Date().toISOString(),
        utm: state.utm
      };
      state.results.push(resultPayload);
      localStorage.setItem('bridgeway-results', JSON.stringify(state.results));
      logEvent('test_complete', { level: band.level, score });
      logEvent('test_level', { level: band.level });
      if (EMAIL_WEBHOOK_URL) {
        fetch(EMAIL_WEBHOOK_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(resultPayload)
        }).catch(() => showToast('Email queue saved', true));
      }
      updateAdminLists();
    }

    function resumeTestState() {
      if (elements.testState.step === 'reading') {
        renderReading();
      } else if (elements.testState.step === 'speaking') {
        renderSpeaking();
      } else if (elements.testState.step === 'result') {
        renderResult();
      } else {
        renderGrammarQuestion();
      }
    }

    function showResumeBanner() {
      elements.resumeTest.classList.remove('hidden');
    }

    function saveTestProgress() {
      localStorage.setItem('bridgeway-test-progress', JSON.stringify(elements.testState));
      logEvent('test_start', { step: elements.testState.step });
    }

    function downloadTestResults() {
      const last = state.results[state.results.length - 1];
      const blob = new Blob([JSON.stringify(last, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `bridgeway-test-${last.level}.json`;
      link.click();
      URL.revokeObjectURL(url);
      logEvent('results_download', { level: last.level });
    }

    function copyTestSummary() {
      const last = state.results[state.results.length - 1];
      const text = `BridgeWay level: ${last.level}\nScore: ${last.score}`;
      navigator.clipboard.writeText(text).then(() => showToast('Copied to clipboard'));
    }

    function getLevelRecommendation(level) {
      const map = {
        A1: 'Start with Essential to build daily vocabulary.',
        A2: 'Focus on Essential to expand grammar and speaking.',
        B1: 'Pro plan boosts meeting and email confidence.',
        B2: 'Pro or Premium will prepare you for leadership.',
        C1: 'Premium ensures executive fluency.',
        C2: 'Premium keeps you at international mastery.'
      };
      return map[level] || 'BridgeWay coaches will guide you.';
    }

    function updateProgress() {
      const answered = elements.testState.answers.length;
      const total = grammarQuestions.length + 2;
      const percent = Math.min(100, Math.round((answered / total) * 100));
      elements.testProgress.style.width = `${percent}%`;
      elements.testProgressLabel.textContent = `${percent}%`;
    }
    function initResources() {
      elements.resourceSearchBtn.addEventListener('click', filterResources);
      ['resource-level', 'resource-type', 'resource-goal'].forEach((id) => {
        document.getElementById(id).addEventListener('change', filterResources);
      });
      elements.resourceSuggestions.innerHTML = resourcesData.map((item) => `<option value="${item.title}"></option>`).join('');
      renderResources(resourcesData);
    }

    function filterResources() {
      logEvent('resource_search', { term: elements.resourceSearch.value });
      const term = elements.resourceSearch.value.toLowerCase();
      const level = elements.resourceLevel.value;
      const type = elements.resourceType.value;
      const goal = elements.resourceGoal.value;
      const filtered = resourcesData.filter((item) => {
        const matchesTerm = !term || item.title.toLowerCase().includes(term);
        const matchesLevel = level === 'all' || item.level === level;
        const matchesType = type === 'all' || item.type === type;
        const matchesGoal = goal === 'all' || item.goal === goal;
        return matchesTerm && matchesLevel && matchesType && matchesGoal;
      });
      renderResources(filtered);
      logEvent('resource_filter', { level, type, goal });
    }

    function renderResources(list) {
      elements.resourceList.innerHTML = '';
      list.forEach((item) => {
        const card = document.createElement('article');
        card.className = 'rounded-3xl bg-white p-5 shadow-lg transition hover:-translate-y-1 dark:bg-slate-900';
        card.innerHTML = `
          <h3 class="text-lg font-semibold">${item.title}</h3>
          <p class="mt-2 text-xs text-slate-500">${item.level} · ${item.type} · ${item.minutes} min</p>
          <button class="mt-4 inline-flex items-center gap-2 rounded-full border border-bw-way px-3 py-2 text-xs font-semibold text-bw-way focus-ring" data-id="${item.id}">Open</button>
        `;
        card.querySelector('button').addEventListener('click', () => openResource(item));
        elements.resourceList.appendChild(card);
      });
    }

    function openResource(item) {
      elements.resourceDetail.hidden = false;
      elements.resourceTitle.textContent = item.title;
      elements.resourceMeta.textContent = `${item.level} · ${item.type} · ${item.minutes} min read`;
      elements.resourceContent.innerHTML = item.content;
      elements.resourceRelated.innerHTML = resourcesData
        .filter((res) => res.level === item.level && res.id !== item.id)
        .map((res) => `<li><button class="underline focus-ring" data-id="${res.id}">${res.title}</button></li>`)
        .join('');
      elements.resourceRelated.querySelectorAll('button').forEach((btn) => {
        btn.addEventListener('click', () => {
          const resource = resourcesData.find((res) => res.id === btn.dataset.id);
          if (resource) openResource(resource);
        });
      });
      logEvent('article_read', { id: item.id });
    }
    function initChat() {
      elements.chatToggle.addEventListener('click', toggleChat);
      document.querySelectorAll('[data-action="open-chat-form"]').forEach((btn) => {
        btn.addEventListener('click', () => {
          toggleChat(false);
          document.getElementById('chat-form-modal').classList.remove('hidden');
        });
      });
      elements.chatInput.addEventListener('input', () => {
        const value = elements.chatInput.value.toLowerCase();
        if (value.includes('price')) {
          elements.chatResponse.innerHTML = 'Essential from €' + calculatePrice('essential').total.toFixed(0);
        } else if (value.includes('company')) {
          elements.chatResponse.innerHTML = `<a class="underline" href="#pricing">${i18n[state.locale].ctas.plan}</a>`;
        } else if (value.includes('kids')) {
          elements.chatResponse.innerHTML = 'Our coaches specialise in young learners with playful tasks.';
        } else {
          elements.chatResponse.textContent = '';
        }
      });
      document.getElementById('chat-form').addEventListener('submit', (event) => {
        event.preventDefault();
        showToast('Thanks!');
        document.getElementById('chat-form-status').textContent = i18n[state.locale].chatForm.success;
        logEvent('form_submit', { form: 'chat' });
      });
    }

    function toggleChat(force) {
      const expanded = typeof force === 'boolean' ? force : elements.chatPanel.classList.contains('hidden');
      elements.chatPanel.classList.toggle('hidden', !expanded);
      elements.chatToggle.setAttribute('aria-expanded', expanded);
    }

    function initModals() {
      document.querySelectorAll('[data-action="close-free-class"]').forEach((btn) => btn.addEventListener('click', closeFreeClass));
      document.querySelectorAll('[data-action="open-guarantee"]').forEach((btn) => btn.addEventListener('click', () => document.getElementById('guarantee-modal').classList.remove('hidden')));
      document.querySelectorAll('[data-action="close-guarantee"]').forEach((btn) => btn.addEventListener('click', () => document.getElementById('guarantee-modal').classList.add('hidden')));
      document.querySelectorAll('[data-action="open-terms"]').forEach((btn) => btn.addEventListener('click', () => document.getElementById('terms-modal').classList.remove('hidden')));
      document.querySelectorAll('[data-action="close-terms"]').forEach((btn) => btn.addEventListener('click', () => document.getElementById('terms-modal').classList.add('hidden')));
      document.querySelectorAll('[data-action="open-privacy"]').forEach((btn) => btn.addEventListener('click', () => document.getElementById('privacy-modal').classList.remove('hidden')));
      document.querySelectorAll('[data-action="close-privacy"]').forEach((btn) => btn.addEventListener('click', () => document.getElementById('privacy-modal').classList.add('hidden')));
      document.getElementById('download-guide').addEventListener('click', downloadGuide);
      generateSlots();
      elements.freeClassForm.addEventListener('input', validateForm);
      elements.freeClassForm.addEventListener('submit', submitFreeClass);
      document.querySelector('[data-action="save-draft"]').addEventListener('click', saveDraft);
    }

    function openFreeClass(plan) {
      elements.freeClassModal.classList.remove('hidden');
      elements.freeClassModal.querySelector('[data-testid="form-name"]').focus();
      if (plan) {
        const goalSelect = elements.freeClassForm.querySelector('select[name="goal"]');
        if (plan.toLowerCase().includes('company')) goalSelect.value = 'company';
      }
      logEvent('cta_click', { label: 'clase_gratis' });
      pushVirtualPage('free-class');
    }

    function closeFreeClass() {
      elements.freeClassModal.classList.add('hidden');
    }
    function generateSlots() {
      const slots = [];
      const now = new Date();
      let days = 0;
      while (slots.length < 20 && days < 20) {
        const date = new Date(now.getFullYear(), now.getMonth(), now.getDate() + days);
        const day = date.getDay();
        if (day !== 0 && day !== 6) {
          for (let hour = 9; hour <= 20; hour += 2) {
            const slotDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), hour, 0, 0);
            slots.push(slotDate);
            if (slots.length === 20) break;
          }
        }
        days += 1;
      }
      elements.slotGrid.innerHTML = '';
      slots.forEach((slot) => {
        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'rounded-2xl border border-slate-200 px-3 py-2 text-left focus-ring data-[selected="true"]:border-bw-way data-[selected="true"]:bg-bw-way/10';
        button.dataset.value = slot.toISOString();
        button.textContent = slot.toLocaleString([], { weekday: 'short', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
        button.addEventListener('click', () => {
          document.querySelectorAll('#slot-grid button').forEach((btn) => btn.dataset.selected = 'false');
          button.dataset.selected = 'true';
          elements.freeClassForm.dataset.selectedSlot = slot.toISOString();
          validateForm();
          logEvent('booking_slot_select', { slot: slot.toISOString() });
        });
        elements.slotGrid.appendChild(button);
      });
    }

    function validateForm() {
      const data = new FormData(elements.freeClassForm);
      let valid = true;
      const errors = {
        name: data.get('name') ? '' : 'Required',
        email: /.+@.+\..+/.test(data.get('email')) ? '' : 'Invalid email',
        phone: data.get('phone') && data.get('phone').replace(/\D/g, '').length >= 7 ? '' : 'Invalid phone',
        age: data.get('age') ? (Number(data.get('age')) >= 4 ? '' : 'Min age 4') : '',
        slot: elements.freeClassForm.dataset.selectedSlot ? '' : 'Select a slot'
      };
      Object.entries(errors).forEach(([field, message]) => {
        const el = elements.freeClassForm.querySelector(`[data-error="${field}"]`);
        if (el) el.textContent = message;
        if (message) valid = false;
      });
      elements.freeClassForm.querySelector('[type="submit"]').disabled = !valid;
      return { valid, data };
    }

    function submitFreeClass(event) {
      event.preventDefault();
      const { valid, data } = validateForm();
      if (!valid) {
        showToast('Fix the errors', true);
        logEvent('form_abandon', { form: 'free-class' });
        return;
      }
      logEvent('form_submit', { form: 'free-class' });
      const payload = Object.fromEntries(data.entries());
      payload.slot = elements.freeClassForm.dataset.selectedSlot;
      payload.locale = state.locale;
      payload.variant = state.variant;
      payload.utm = state.utm;
      payload.createdAt = new Date().toISOString();
      elements.formStatus.textContent = 'Sending...';
      elements.freeClassForm.querySelector('[type="submit"]').disabled = true;
      const sendPromise = CRM_WEBHOOK_URL
        ? fetch(CRM_WEBHOOK_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          })
        : Promise.resolve({ ok: true });
      sendPromise
        .then((response) => {
          if (!response.ok) throw new Error('Network');
          elements.formStatus.textContent = 'Confirmed!';
          state.leads.push(payload);
          localStorage.setItem('bridgeway-leads', JSON.stringify(state.leads));
          elements.formSuccess.classList.remove('hidden');
          updateAdminLists();
          logEvent('booking_confirmed', { slot: payload.slot });
          showConfetti();
          prepareCalendars(payload);
        })
        .catch(() => {
          elements.formStatus.innerHTML = 'Offline. Saved locally. <button class="underline" id="retry-send">Retry</button>';
          document.getElementById('retry-send').addEventListener('click', () => submitFreeClass(event));
        });
    }

    function prepareCalendars(payload) {
      const slotDate = new Date(payload.slot);
      const endDate = new Date(slotDate.getTime() + 45 * 60000);
      const icsContent = `BEGIN:VCALENDAR\nVERSION:2.0\nBEGIN:VEVENT\nSUMMARY:BridgeWay Free Class\nDTSTART:${formatICSDate(slotDate)}\nDTEND:${formatICSDate(endDate)}\nDESCRIPTION:Goal: ${payload.goal}\nEND:VEVENT\nEND:VCALENDAR`;
      elements.formSuccess.dataset.ics = icsContent;
      elements.googleCalendar.href = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=BridgeWay+Free+Class&dates=${formatGoogleDate(slotDate)}/${formatGoogleDate(endDate)}&details=Goal:${payload.goal}`;
      elements.appleCalendar.href = `data:text/calendar;charset=utf8,${encodeURIComponent(icsContent)}`;
      elements.outlookCalendar.href = elements.appleCalendar.href;
      const whatsappText = encodeURIComponent(`Hi BridgeWay, this is ${payload.name}. Confirming my class on ${slotDate.toLocaleString()} for ${payload.goal}.`);
      elements.whatsappConfirm.href = `https://wa.me/447441432198?text=${whatsappText}`;
    }

    function formatICSDate(date) {
      return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
    }

    function formatGoogleDate(date) {
      return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
    }

    document.querySelector('[data-action="download-ics"]').addEventListener('click', () => {
      const content = elements.formSuccess.dataset.ics;
      const blob = new Blob([content], { type: 'text/calendar' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'bridgeway-class.ics';
      link.click();
      URL.revokeObjectURL(url);
      logEvent('booking_confirmed', { calendar: 'ics' });
    });

    function saveDraft() {
      const data = Object.fromEntries(new FormData(elements.freeClassForm).entries());
      localStorage.setItem('bridgeway-form-draft', JSON.stringify(data));
      showToast('Draft saved');
    }
    function downloadGuide() {
      const pdfContent = `%PDF-1.3\n1 0 obj<</Type/Catalog/Pages 2 0 R>>endobj\n2 0 obj<</Type/Pages/Count 1/Kids[3 0 R]>>endobj\n3 0 obj<</Type/Page/Parent 2 0 R/MediaBox[0 0 300 200]/Contents 4 0 R/Resources<</Font<</F1 5 0 R>>>>>>endobj\n4 0 obj<</Length 86>>stream\nBT /F1 12 Tf 30 150 Td (BridgeWay Business English Kit) Tj 30 130 Td (Top phrases for meetings and emails.) Tj ET\nendstream endobj\n5 0 obj<</Type/Font/Subtype/Type1/BaseFont/Helvetica>>endobj\nxref\n0 6\n0000000000 65535 f \n0000000010 00000 n \n0000000060 00000 n \n0000000115 00000 n \n0000000288 00000 n \n0000000400 00000 n \ntrailer<</Size 6/Root 1 0 R>>\nstartxref\n475\n%%EOF`;
      const blob = new Blob([pdfContent], { type: 'application/pdf' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'bridgeway-business-kit.pdf';
      link.click();
      URL.revokeObjectURL(url);
      logEvent('exit_intent_shown', { action: 'download' });
    }

    function initBackToTop() {
      window.addEventListener('scroll', () => {
        elements.backToTop.classList.toggle('hidden', window.scrollY < window.innerHeight / 2);
      });
    }

    function initConsent() {
      const consent = localStorage.getItem('bridgeway-consent');
      if (!consent) {
        elements.consentBanner.classList.remove('hidden');
      } else if (consent === 'accepted') {
        enableAnalytics();
      }
      document.getElementById('consent-accept').addEventListener('click', () => {
        localStorage.setItem('bridgeway-consent', 'accepted');
        elements.consentBanner.classList.add('hidden');
        enableAnalytics();
      });
      document.getElementById('consent-decline').addEventListener('click', () => {
        localStorage.setItem('bridgeway-consent', 'declined');
        elements.consentBanner.classList.add('hidden');
      });
    }

    function initAnalytics() {
      if (GA_MEASUREMENT_ID) {
        window.dataLayer = window.dataLayer || [];
        window.gtag = function(){ dataLayer.push(arguments); };
        gtag('js', new Date());
        gtag('config', GA_MEASUREMENT_ID, { send_page_view: false });
      }
    }

    function enableAnalytics() {
      analyticsEnabled = true;
      elements.analyticsLog.classList.remove('hidden');
      eventQueue.forEach((item) => dispatchEvent(item));
      eventQueue.length = 0;
    }

    function logEvent(name, params = {}) {
      const payload = { name, params: { ...params, locale: state.locale, variant: state.variant, ...state.utm }, timestamp: new Date().toISOString() };
      if (!analyticsEnabled) {
        eventQueue.push(payload);
      } else {
        dispatchEvent(payload);
      }
    }

    function dispatchEvent(payload) {
      const { name, params } = payload;
      const entry = document.createElement('div');
      entry.textContent = `${name} ${JSON.stringify(params)}`;
      elements.analyticsLog.prepend(entry);
      if (GA_MEASUREMENT_ID && window.gtag) {
        gtag('event', name, params);
      }
    }

    function pushVirtualPage(name) {
      logEvent('page_view', { page: name });
    }

    function initAdmin() {
      document.addEventListener('keydown', (event) => {
        if (event.key.toLowerCase() === 'l' && event.shiftKey) {
          elements.adminDrawer.classList.toggle('hidden');
          updateAdminLists();
        }
      });
      document.querySelector('[data-action="close-admin"]').addEventListener('click', () => elements.adminDrawer.classList.add('hidden'));
      elements.adminVariant.value = state.variant;
      elements.adminVariant.addEventListener('change', (event) => {
        state.variant = event.target.value;
        updateHeroVariant();
      });
      elements.flagExit.checked = state.flags.exit;
      elements.flagSticky.checked = state.flags.sticky;
      elements.flagSpeech.checked = state.flags.speech;
      elements.flagExit.addEventListener('change', () => {
        state.flags.exit = elements.flagExit.checked;
        localStorage.setItem('bridgeway-flag-exit', JSON.stringify(state.flags.exit));
      });
      elements.flagSticky.addEventListener('change', () => {
        state.flags.sticky = elements.flagSticky.checked;
        localStorage.setItem('bridgeway-flag-sticky', JSON.stringify(state.flags.sticky));
        initOfferBar();
      });
      elements.flagSpeech.addEventListener('change', () => {
        state.flags.speech = elements.flagSpeech.checked;
        localStorage.setItem('bridgeway-flag-speech', JSON.stringify(state.flags.speech));
      });
      document.getElementById('export-leads').addEventListener('click', () => exportData('bridgeway-leads', state.leads));
      document.getElementById('export-results').addEventListener('click', () => exportData('bridgeway-results', state.results));
      document.getElementById('trigger-confetti').addEventListener('click', showConfetti);
      document.getElementById('trigger-toast').addEventListener('click', () => showToast('BridgeWay toast example'));
    }

    function updateAdminLists() {
      elements.adminLeads.innerHTML = state.leads.map((lead) => `<p>${lead.name} · ${new Date(lead.slot).toLocaleString()}</p>`).join('') || '<p>No leads yet.</p>';
      elements.adminResults.innerHTML = state.results.map((result) => `<p>${result.level} · ${result.score}</p>`).join('') || '<p>No results yet.</p>';
    }

    function exportData(name, data) {
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `${name}.json`;
      link.click();
      URL.revokeObjectURL(url);
      logEvent(name === 'bridgeway-leads' ? 'lead_export' : 'results_download', { count: data.length });
    }

    function initOfferBar() {
      if (state.flags.sticky) {
        elements.stickyOffer.classList.remove('hidden');
      } else {
        elements.stickyOffer.classList.add('hidden');
      }
    }

    function initExitIntent() {
      let shown = false;
      function show() {
        if (!shown && state.flags.exit) {
          elements.exitIntent.classList.remove('hidden');
          shown = true;
          logEvent('exit_intent_shown');
        }
      }
      document.addEventListener('mouseleave', (event) => {
        if (event.clientY < 0) show();
      });
      document.querySelector('[data-action="close-exit"]').addEventListener('click', () => elements.exitIntent.classList.add('hidden'));
    }

    function showToast(message, error = false) {
      elements.toast.textContent = message;
      elements.toast.classList.toggle('bg-rose-600', error);
      elements.toast.classList.remove('hidden');
      setTimeout(() => elements.toast.classList.add('hidden'), 2500);
    }

    function showConfetti() {
      elements.confetti.classList.remove('hidden');
      elements.confetti.innerHTML = '';
      for (let i = 0; i < 30; i += 1) {
        const piece = document.createElement('div');
        piece.className = 'absolute h-2 w-2 rounded-full';
        piece.style.background = ['#4967E4', '#0A0F4C', '#38bdf8'][i % 3];
        piece.style.left = Math.random() * 100 + '%';
        piece.style.top = '-10%';
        piece.style.transition = 'transform 1s ease-out, opacity 1s';
        elements.confetti.appendChild(piece);
        requestAnimationFrame(() => {
          piece.style.transform = `translateY(${120 + Math.random() * 40}vh)`;
          piece.style.opacity = '0';
        });
      }
      setTimeout(() => elements.confetti.classList.add('hidden'), 1500);
    }

    function initServiceWorker() {
      if ('serviceWorker' in navigator) {
        const swCode = `self.addEventListener('install', (event) => {
          event.waitUntil(caches.open('bridgeway-shell').then((cache) => cache.addAll(['./', './index.html'])));
        });
        self.addEventListener('fetch', (event) => {
          event.respondWith(caches.match(event.request).then((response) => response || fetch(event.request).catch(() => new Response('<h1>BridgeWay offline</h1>', { headers: { 'Content-Type': 'text/html' } }))));
        });`;
        const blob = new Blob([swCode], { type: 'application/javascript' });
        const url = URL.createObjectURL(blob);
        navigator.serviceWorker.register(url);
      }
    }

    function initManifest() {
      const manifest = {
        name: 'BridgeWay Academy',
        short_name: 'BridgeWay',
        start_url: '.',
        display: 'standalone',
        background_color: '#0A0F4C',
        theme_color: '#4967E4',
        icons: [
          { src: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><rect width="120" height="120" rx="24" fill="%230A0F4C"/><text x="50%" y="50%" fill="white" font-size="48" font-family="Inter" text-anchor="middle" dominant-baseline="middle">BW</text></svg>', sizes: '120x120', type: 'image/svg+xml' }
        ]
      };
      const blob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      document.getElementById('manifest-link').setAttribute('href', url);
    }

    function populateFAQSchema() {
      const strings = i18n[state.locale];
      const faqData = {
        '@context': 'https://schema.org',
        '@type': 'FAQPage',
        mainEntity: [
          { '@type': 'Question', name: strings.faq.q1, acceptedAnswer: { '@type': 'Answer', text: strings.faq.a1 } },
          { '@type': 'Question', name: strings.faq.q2, acceptedAnswer: { '@type': 'Answer', text: strings.faq.a2 } },
          { '@type': 'Question', name: strings.faq.q3, acceptedAnswer: { '@type': 'Answer', text: strings.faq.a3 } }
        ]
      };
      document.getElementById('ld-faq').textContent = JSON.stringify(faqData);
    }

    function populateBreadcrumbs() {
      const strings = i18n[state.locale];
      const breadcrumbs = {
        '@context': 'https://schema.org',
        '@type': 'BreadcrumbList',
        itemListElement: [
          { '@type': 'ListItem', position: 1, name: strings.breadcrumb.home, item: '#home' },
          { '@type': 'ListItem', position: 2, name: strings.breadcrumb.programs, item: '#programs' }
        ]
      };
      document.getElementById('ld-breadcrumbs').textContent = JSON.stringify(breadcrumbs);
      const organization = {
        '@context': 'https://schema.org',
        '@type': 'EducationalOrganization',
        name: 'BridgeWay Academy',
        url: 'https://bridgeway.example',
        address: 'London, UK',
        sameAs: ['https://www.linkedin.com', 'https://www.facebook.com']
      };
      document.getElementById('ld-organization').textContent = JSON.stringify(organization);
    }

    document.addEventListener('click', (event) => {
      if (event.target.closest('[data-action="close-free-class"]') && event.target === elements.freeClassModal) {
        closeFreeClass();
      }
    });
  </script>
</body>
</html>
